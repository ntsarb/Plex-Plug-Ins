"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[231],{58730:(e,t,r)=>{r.d(t,{I:()=>l,w:()=>n});const l="boolean",n="other"},52331:(e,t,r)=>{r.d(t,{Z:()=>g});var l=r(13469),n=r.n(l),a=r(96638),i=(r(11133),r(58730)),o=Object.defineProperty,c=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,m=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(s)for(var r of s(t))m.call(t,r)&&u(e,r,t[r]);return e},y=r(70560),d=r(23736);const v=`([^&!=<>]+)(${y.ZP.sort(((e,t)=>t.length-e.length)).map(a.Z).join("|")})([^&]+)?`,f=new RegExp(v,"g"),b=new RegExp(v),Z={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};function g(e){if(!e)return[];const t=decodeURIComponent(e).match(f);return t?t.reduce(((e,t)=>{const r=t.match(b),[,l,a,o]=r||[];let c=o?n().uniq(o.split(d.OR)):"";return 1===c.length&&(c=c[0]),function(e,t,r){const l=[...e];if(r.type===i.I){const e=n().findIndex(l,(e=>e.key===t)),a=-1===e?0:e,i=p({key:t},r);-1===e?l.push(i):l.splice(a,1,i)}else n().findWhere(l,{key:t,value:r.value})||l.push(p({key:t},r));return l}(e,l,{value:c,type:Z[l]?i.I:i.w,operator:a})}),[]):[]}},96015:(e,t,r)=>{r.d(t,{Z:()=>s}),r(13469),r(11133);var l=Object.defineProperty,n=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,o=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&o(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&o(e,r,t[r]);return e};function s(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const l=[...e];let n=l.length;for(;n-- >0;){const e=l[n],a=e.key,i=e.value;if(t===a&&r===i)l.splice(n,1);else if(t===a&&Array.isArray(i)){const t=i.indexOf(r);t>-1&&(i.splice(t,1),1===i.length?l.splice(n,1,c(c({},e),{value:i[0]})):i.length||l.splice(n,1))}}return l}},45318:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(67294),n=r(39409),a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){return l.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&s(e,r,t[r]);return e})({},e))}m.defaultProps={className:"PageHeaderBadge-badge-1St9OR"};const u=m},99517:(e,t,r)=>{r.d(t,{Z:()=>o});var l=r(22222),n=r(18409),a=r(70617),i=r(38992);const o=(0,a.Z)((function(e){return(0,l.P1)((0,i.Z)(e),(e=>e.accounts.slice().sort(n.Z)))}))},18409:(e,t,r)=>{function l(e,t){if(1===e.id)return-1;if(1===t.id)return 1;const r=e.name.trim().toUpperCase(),l=t.name.trim().toUpperCase();return r<l?-1:r>l?1:0}r.d(t,{Z:()=>l})},70449:(e,t,r)=>{r.d(t,{Z:()=>y});var l=r(67294),n=r(5562),a=r(26253),i=r(72373);const o={sortDirectionIcon:"IconTableHeaderSortDirection-sortDirectionIcon-2M6Vgj"};var c=Object.defineProperty,s=Object.prototype.hasOwnProperty,m=Object.getOwnPropertySymbols,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){var t=e,{className:r=o.sortDirectionIcon,isAscending:c=!0}=t,y=((e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&m)for(var l of m(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r})(t,["className","isAscending"]);const d=c?a.Z:i.Z;return l.createElement(d,((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&p(e,r,t[r]);if(m)for(var r of m(t))u.call(t,r)&&p(e,r,t[r]);return e})({"aria-label":c?(0,n.Z)("Ascending"):(0,n.Z)("Descending"),className:r},y))}},58050:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(67294);const n={tableCell:"TableCell-tableCell-3eVBRq",activeTableCell:"TableCell-activeTableCell-3P4hyD TableCell-tableCell-3eVBRq",title:"TableCell-title-2drZcu"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&s(e,r,t[r]);return e};function u(e){var t=e,{className:r=n.title,cellClassName:a=n.tableCell,activeCellClassName:s=n.activeTableCell,style:u,component:p,type:y,isActiveSort:d}=t,v=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&c.call(e,l)&&(r[l]=e[l]);return r})(t,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return l.createElement("div",{className:d?s:a,style:u},l.createElement(p,m(m({},v),{className:r})))}},71716:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(67294);const n={tableHeader:"TableHeader-tableHeader-1uylmm"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&s(e,r,t[r]);return e};function u(e){var t=e,{className:r=n.tableHeader}=t,a=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&c.call(e,l)&&(r[l]=e[l]);return r})(t,["className"]);return l.createElement("div",m(m({},a),{className:r}))}},76764:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(67294);const n={tableHeaderCell:"TableHeaderCell-tableHeaderCell-36KGxp TableCell-tableCell-3eVBRq",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-3TbDPT TableHeaderCell-tableHeaderCell-36KGxp TableCell-tableCell-3eVBRq"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&s(e,r,t[r]);return e};function u(e){var t=e,{className:r=n.tableHeaderCell,activeClassName:a=n.activeTableHeaderCell,children:s,isActive:u=!1}=t,p=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&c.call(e,l)&&(r[l]=e[l]);return r})(t,["className","activeClassName","children","isActive"]);const y=u?a:r;return l.createElement("span",m(m({},p),{className:y}),s)}},5718:(e,t,r)=>{r.d(t,{Z:()=>p});var l=r(67294),n=r(17331);const a={tableHeaderLink:"TableHeaderLink-tableHeaderLink-3yiPl7 Link-link-1Kt-hA"};var i=Object.defineProperty,o=Object.prototype.hasOwnProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))s.call(t,r)&&m(e,r,t[r]);return e};function p(e){var t=e,{className:r=a.tableHeaderLink,children:i}=t,m=((e,t)=>{var r={};for(var l in e)o.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r})(t,["className","children"]);return l.createElement(n.Z,u(u({},m),{className:r}),i)}},90317:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(67294);const n={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-2qvD3G"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&s(e,r,t[r]);return e};function u(e){var t=e,{className:r=n.tableHeaderTitle,children:a}=t,s=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&c.call(e,l)&&(r[l]=e[l]);return r})(t,["className","children"]);return l.createElement("span",m(m({},s),{className:r}),a)}},17231:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ut});var l=r(67294),n=r(69605),a=r(31235),i=r(74309),o=r(2200),c=r(1346),s=r(75989),m=r(31446),u=r(37703),p=r(52331),y=r(27082),d=r(53334),v=r(14408),f=r(93683),b=r(56442),Z=r(84936),g=r(12634);const h=d.Z.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:v.Z.string,parentKey:v.Z.string,grandparentKey:v.Z.string,title:v.Z.string,parentTitle:v.Z.string,grandparentTitle:v.Z.string,type:v.Z.string,thumb:v.Z.string,parentThumb:v.Z.string,grandparentThumb:v.Z.string,grandparentArt:v.Z.string,index:v.Z.integer,parentIndex:v.Z.integer,originallyAvailableAt:v.Z.string,viewedAt:v.Z.integer,accountID:v.Z.integer,deviceID:v.Z.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),O=g.Z.extend({name:"PlayHistoryListItemCollection",context:["server"],model:h});d.Z.extend({mixins:[f.Z],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:b.AV,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=Z.Z.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:v.Z.integer,currentPageSize:v.Z.integer,populatedRange:v.Z.object},syncedAttrs:{totalSize:v.Z.integer},syncedRelations:{items:{relationClass:O,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var P=r(74395),w=r(23306),E=r(19595),I=r(24906),T=r(57138),k=r(5623);function C(e,t){return!!e&&e.some((e=>e.key===t))}var H=r(5562),N=r(13550);var x=r(22222),j=r(38992);var S=r(86626),A=r(69881),M=r(31212),R=r(48903),D=r(96051);const F={key:"user",title:()=>(0,H.Z)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{accountID:n}=t,i=(0,l.useMemo)((()=>((e,t)=>(0,x.P1)((0,j.Z)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,n)),[n,r.machineIdentifier]),o=(0,u.v9)(i);return o?l.createElement("span",{className:e,title:o.name},o.name):l.createElement("span",{className:e},(0,H.Z)("Unknown User"))},style:{flex:"1 1 250px"}},L={key:"type",title:()=>(0,H.Z)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,n=(0,A.getMetadataType)(r);return n?l.createElement("span",{className:e,title:n.title},n.title):null},style:{flex:"0 1 120px"}},q={key:"title",title:()=>(0,H.Z)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,N.Z)(t);return l.createElement("span",{className:e},l.createElement("div",{className:"PlayHistoryTableTitle-titleContainer-3bvNXD"},l.createElement("span",{className:"PlayHistoryTableTitle-title-3B9T6x",title:r},r)))},style:{flex:"2 0 350px"}},K={key:"player",title:()=>(0,H.Z)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,u.v9)((0,S.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.name},i.name):l.createElement("span",{className:e},(0,H.Z)("Unknown"))},style:{flex:"1 1 150px"}},U={key:"platform",title:()=>(0,H.Z)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,u.v9)((0,S.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.platform},i.platform):l.createElement("span",{className:e},(0,H.Z)("Unknown"))},style:{flex:"1 1 150px"}},B=[{key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,H.Z)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,n=(0,u.v9)(R.Z),a=(0,M.Z)(1e3*r,`${n} MMM d, yyyy`);return l.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}}];var z=r(20272),V=r(38770),X=r(75157),_=r(7796),G=r(14146);const W=parseInt(_.Z.tableRowHeight,10),Y=(0,G.Z)({rowHeight:W,overscan:20});var $=r(68809),Q=r(80367),J=r(63919),ee=r(7203),te=r(49228);const re=(0,x.P1)(te.Z,(e=>e.playHistory));var le=r(17331),ne=r(58050),ae=r(54778),ie=r(6638);const oe=l.forwardRef((({style:e,cellIndex:t},r)=>l.createElement("div",{ref:r,className:t%2?"PlayHistoryTableRowLoading-alternateLoadingItem-2p-Vys PlayHistoryTableRowLoading-loadingItem-3MSn-_":"PlayHistoryTableRowLoading-loadingItem-3MSn-_",style:e},(0,H.Z)("Loading..."))));var ce=Object.prototype.hasOwnProperty,se=Object.getOwnPropertySymbols,me=Object.prototype.propertyIsEnumerable;function ue(e){var t=e,{item:r,activeTableColumns:n}=t,i=((e,t)=>{var r={};for(var l in e)ce.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&se)for(var l of se(e))t.indexOf(l)<0&&me.call(e,l)&&(r[l]=e[l]);return r})(t,["item","activeTableColumns"]);const[o]=(0,a.c9)(),c=(0,ae.Z)(i);let s;if(null==r?void 0:r.key){const e=n.some((e=>"title"===e.key)),t=r.type===A.TRACK?r.parentKey:r.key;s=e?(0,ie.Z)(o,{isLibraryProvider:!0},t):void 0}return r?l.createElement("div",{ref:c.cellRef,className:i.cellIndex%2?"PlayHistoryTableRow-alternateItem-2QSxpw PlayHistoryTableRow-item-BqkCrH":"PlayHistoryTableRow-item-BqkCrH",style:c.style},l.createElement(le.Z,{"aria-label":r.title,className:"PlayHistoryTableRow-columns-2m6HT6 Link-link-1Kt-hA",isDisabled:!s,to:s},n.map((({style:e,component:t},n)=>l.createElement(ne.Z,{key:n,component:t,playHistoryItem:r,style:e}))))):l.createElement(oe,{ref:c.cellRef,cellIndex:i.cellIndex,style:c.style})}var pe=Object.defineProperty,ye=Object.prototype.hasOwnProperty,de=Object.getOwnPropertySymbols,ve=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(de)for(var r of de(t))ve.call(t,r)&&fe(e,r,t[r]);return e};function Ze({activeTableColumns:e,activeFilters:t,activeSort:r}){const n=(0,u.I0)(),[i]=(0,a.c9)(),o=(0,u.v9)(re),c=(0,u.v9)((0,S.Z)(i.machineIdentifier)),{items:s,totalSize:m,isPopulated:p,error:y}=o,{isPopulated:d,error:v}=c,f=(0,l.useCallback)((e=>{n(k.Z.actions.fetchRangeRequested(be(be({},e),{server:i,filters:t,sort:r})))}),[n,i,t,r]),b=(0,l.useMemo)((()=>t=>l.createElement(ue,be(be({},t),{activeTableColumns:e}))),[e]);return p&&m&&(d||v)?l.createElement(J.Z,{cellComponentFactory:b,className:"PlayHistoryList-playHistoryListPageContent-2RIN3O PageContent-pageContentScroller-2dar0i Scroller-scroller-HAUFpl",items:s,layout:Y,totalSize:m,onPageRequest:f}):p&&!m?l.createElement($.Z,{description:(0,H.Z)("Snuggle up on the couch and play something!"),title:(0,H.Z)("Nothing to see here")}):y?l.createElement(Q.Z,null):l.createElement($.Z,null,l.createElement(ee.Z,null))}var ge=r(45318),he=r(41859),Oe=r(24351),Pe=r(24754),we=r(7118),Ee=r(58730),Ie=r(96015),Te=(r(11133),Object.defineProperty),ke=Object.prototype.hasOwnProperty,Ce=Object.getOwnPropertySymbols,He=Object.prototype.propertyIsEnumerable,Ne=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function xe(e,t,r){const l=[...e],n=l.findIndex((e=>e.key===t)),a=-1===n?0:n,i=((e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Ne(e,r,t[r]);if(Ce)for(var r of Ce(t))He.call(t,r)&&Ne(e,r,t[r]);return e})({key:t},r);return-1===n?l.push(i):l.splice(a,1,i),l}var je=r(74287),Se=r(9119),Ae=r(75534),Me=r(99517),Re=r(46905),De=r(46525),Fe=Object.defineProperty,Le=Object.prototype.hasOwnProperty,qe=Object.getOwnPropertySymbols,Ke=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Be=(e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&Ue(e,r,t[r]);if(qe)for(var r of qe(t))Ke.call(t,r)&&Ue(e,r,t[r]);return e};let ze,Ve;function Xe(e,t=window.location.hash){const r=function(e){if(ze===e)return Ve;const t=e.split("?"),r=t.length>1?t[1]:void 0,l=r?Z.Z.parseParams(r):{};return ze=e,Ve={url:t[0],params:l},Ve}(t);return Z.Z.join(r.url,Be(Be({},r.params),{filters:(0,De.Z)(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort}))}var _e=r(55278);function Ge({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n]=(0,a.c9)(),i=(0,Ae.Z)(),o=(0,Re.Z)(),c=(0,l.useMemo)((()=>({key:"",title:(0,H.Z)("All Users")})),[]),s=(0,u.v9)((0,Me.Z)(n.machineIdentifier)),m=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[c])),[s,c]),p=(0,l.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?m.find((e=>e.key===t.value)):c}),[e,m,c]),y=(0,l.useCallback)((l=>{let n;n=l?xe(e,D.F.AccountID,{value:String(l),type:Ee.w}):(0,Ie.Z)(e,D.F.AccountID),window.location.hash=Xe({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&m.length?l.createElement(l.Fragment,null,l.createElement(he.Z,{hasMenu:!0,id:i,isMenuOpen:o.isOpen,onPress:o.onToggle},p.title),l.createElement(je.Z,{isOpen:o.isOpen,target:i,onMenuClose:o.onClose},m.map((e=>l.createElement(_e.Z,{key:e.key,isSelected:p.key===e.key,value:e.key,onSelect:(0,Se.Z)(y,o.onClose)},e.title))))):null}var We=r(70617),Ye=r(84389);const $e=(0,We.Z)((function(e,t){return(0,x.P1)((0,Ye.Z)(e,t),(e=>e.filter((e=>{const t=e.type?A.getMetadataType(e.type):null;return t&&t.typeString!==A.PLAYLIST}))))}));function Qe({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n,i]=(0,a.c9)(),o=(0,Ae.Z)(),c=(0,Re.Z)(),s=(0,u.v9)($e(n.machineIdentifier,i.identifier)),m=(0,l.useMemo)((()=>({key:"all",title:(0,H.Z)("All Libraries")})),[]),p=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[m])),[s,m]),y=(0,l.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&p.length?p.find((e=>String(e.key)===t.value)):m}),[e,p,m]),d=(0,l.useCallback)((l=>{let n;n="all"!==l?xe(e,D.F.LibrarySectionID,{value:l,type:Ee.w}):(0,Ie.Z)(e,D.F.LibrarySectionID),window.location.hash=Xe({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return y&&s.length?l.createElement(l.Fragment,null,l.createElement(he.Z,{hasMenu:!0,id:o,isMenuOpen:c.isOpen,onPress:c.onToggle},y.title),l.createElement(je.Z,{isOpen:c.isOpen,target:o,onMenuClose:c.onClose},p.map((e=>l.createElement(_e.Z,{key:e.key,isSelected:y.key===e.key,value:e.key,onSelect:(0,Se.Z)(d,c.onClose)},e.title))))):null}var Je=r(47192);function et(){const[e]=(0,a.c9)(),t=(0,Ae.Z)(),r=(0,Re.Z)(),n=(0,u.v9)(Je.Z),i=(0,l.useMemo)((()=>n.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[n]),o=(0,l.useMemo)((()=>i.find((t=>t.key===e.machineIdentifier))),[e,i]),c=(0,l.useCallback)((e=>{window.location.hash=(0,we.Z)(e)}),[]);return o?l.createElement(l.Fragment,null,l.createElement(he.Z,{hasMenu:!0,id:t,isMenuOpen:r.isOpen,onPress:r.onToggle},o.title),l.createElement(je.Z,{isOpen:r.isOpen,target:t,onMenuClose:r.onClose},i.map((e=>l.createElement(_e.Z,{key:e.key,isSelected:o.key===e.key,value:e.key,onSelect:(0,Se.Z)(c,r.onClose)},e.title))))):null}function tt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const n=(0,Ae.Z)(),a=(0,Re.Z)(),i=[X.XH.Week,X.XH.Month,X.XH.NinetyDays,X.XH.Year,X.XH.AllTime],o=(0,l.useCallback)((t=>{const l=xe(e,D.F.ViewedAt,{value:String((0,X.xP)(t)),type:Ee.w});window.location.hash=Xe({filters:l,activeTimePeriod:t,sort:r})}),[e,r]);return l.createElement(l.Fragment,null,l.createElement(he.Z,{hasMenu:!0,id:n,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,X.dZ)(t)),l.createElement(je.Z,{isOpen:a.isOpen,target:n,onMenuClose:a.onClose},i.map((e=>l.createElement(_e.Z,{key:e,isSelected:t===e,value:e,onSelect:(0,Se.Z)(o,a.onClose)},(0,X.dZ)(e))))))}const rt=(0,x.P1)(re,(e=>e.totalSize));function lt({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:n}){const[i]=(0,a.c9)(),o=(0,u.v9)(rt),c=!C(e,D.F.MetadataItemID);return l.createElement(Pe.Z,null,l.createElement(Oe.Z,null,l.createElement(he.Z,{to:(0,we.Z)(i.machineIdentifier)},(0,H.Z)("Play History")),t?l.createElement(he.Z,null,t):null,c?l.createElement(et,null):null,c?l.createElement(l.Fragment,null,l.createElement(Qe,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(Ge,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(tt,{activeFilters:e,activeSort:n,activeTimePeriod:r})):null,l.createElement(ge.Z,null,o)))}var nt=r(70449),at=r(71716),it=r(76764),ot=r(5718),ct=r(90317);function st({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:n}){return l.createElement(at.Z,null,e.map((({style:e,title:a,ascKey:i,descKey:o,key:c})=>{if(!i)return l.createElement("div",{key:c,className:"PlayHistoryTableHeader-tableHeader-18tg8-",style:e},l.createElement(it.Z,null,l.createElement(ct.Z,null,a())));const s=n===i||n===o,m=n===i;return l.createElement(ot.Z,{key:c,style:e,to:Xe({filters:t,activeTimePeriod:r,sort:m?o:i})},l.createElement(it.Z,{isActive:s},l.createElement(ct.Z,null,a()),s?l.createElement(nt.Z,{isAscending:!m}):null))})))}function mt(){var e;const t=(0,u.I0)(),[r]=(0,a.c9)(),n=(0,i.Z)(),o=(0,p.Z)(n.filters),c=(0,s.Z)(n.filterTitle),m=null!=(e=(0,z.su)(X.XH).find((e=>e===(0,s.Z)(n.activeTimePeriod))))?e:X.XH.AllTime,d=n.sort?(0,s.Z)(n.sort):"viewedAt:desc",v=(0,V.Z)(n.isParentType),f=function(e,t){let r=[K,U,...B];return!t&&C(e,D.F.MetadataItemID)||(r=[q,...r]),C(e,D.F.LibrarySectionID)||C(e,D.F.MetadataItemID)||(r=[L,...r]),C(e,D.F.AccountID)||(r=[F,...r]),r}(o,v);return(0,E.Z)(),(0,l.useEffect)((()=>{t(w.Z.actions.populateRequested({server:r})),t(P.Z.actions.populateRequested({server:r}))}),[t,r]),(0,l.useEffect)((()=>((0,y.c9)((()=>{t(k.Z.actions.fetchRangeRequested({server:r,filters:o,sort:d,startIndex:0,size:100}))})),()=>{t(k.Z.actions.reset())})),[o,d,t,r]),l.createElement(I.Z,{scrollDirection:T.I.None},l.createElement(lt,{activeFilterTitle:c,activeFilters:o,activeSort:d,activeTimePeriod:m}),l.createElement(st,{activeFilters:o,activeSort:d,activeTableColumns:f,activeTimePeriod:m}),l.createElement(Ze,{activeFilters:o,activeSort:d,activeTableColumns:f}))}function ut(){const{machineIdentifier:e,providerIdentifier:t}=(0,c.Z)(),r=(0,i.Z)();return l.createElement(a.ZP,{machineIdentifier:e,providerIdentifier:t},l.createElement(m.Z,{machineIdentifier:e,providerIdentifier:t},l.createElement(o.ZP,{metricsContext:(0,s.Z)(r.context),metricsPage:n.mw},l.createElement(mt,null))))}},38770:(e,t,r)=>{r.d(t,{Z:()=>l});const l=function(e){return 1===Number(e)||"true"===e}},26253:(e,t,r)=>{r.d(t,{Z:()=>c});var l=r(45697),n=r.n(l),a=r(67294),i=r(17845);function o(e){const t=e["aria-label"],r=e.className,l=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=l,n.className=i.Z.plexIcon+(r?" "+r:"");const o=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&o.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(o))}o.propTypes={"aria-label":n().string,className:n().string,style:n().object};const c=o},72373:(e,t,r)=>{r.d(t,{Z:()=>c});var l=r(45697),n=r.n(l),a=r(67294),i=r(17845);function o(e){const t=e["aria-label"],r=e.className,l=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=l,n.className=i.Z.plexIcon+(r?" "+r:"");const o=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&o.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(o))}o.propTypes={"aria-label":n().string,className:n().string,style:n().object};const c=o}}]);