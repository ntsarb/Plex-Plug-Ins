"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[502],{47752:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(22222),s=r(9922),i=r(17939),l=r(235);const a=(0,i.Z)(l.Z,(({homeSettings:e})=>e)),o=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},69139:(e,t,r)=>{r.d(t,{Z:()=>N});var n=r(67294),s=r(28216),i=r(22222),l=r(84503),a=r(235),o=r(87442),c=r(36795),u=(r(32903),r(73788)),p=r(87264),m=r(85448),y=r(54098),d=r(28201),h=r(8059),S=r(90425),f=r(4913),b=r(61133),v=r(66188),g=r(95844),P=r(84332);class E extends n.Component{constructor(){super(...arguments),this.onListStylePress=e=>{this.props.onListStylePress(this.props.listStyle)}}render(){const{isSelected:e,title:t}=this.props;return n.createElement(P.Z,{isSelected:e,onPress:this.onListStylePress},t)}}const O=E;class Z extends n.Component{constructor(e,t){super(e,t),this.onSliderChange=({steppedValue:e})=>{this.setState({sliderValue:e}),this._clearTimeout(),this._columnAdjustmentTimeoutID=window.setTimeout((()=>{this.props.onColumnAdjustmentChange(-1*e)}),this.props.columnAdjustmentTimeout)},this.onStylesPress=e=>{this.setState({isStylesMenuOpen:!this.state.isStylesMenuOpen})},this.onStylesMenuClose=()=>{this.setState({isStylesMenuOpen:!1})},this.onListStylePress=e=>{this.props.onListStyleChange(e),this.onStylesMenuClose()},this.state={sliderValue:-1*e.columnAdjustment,isStylesMenuOpen:!1},this._stylesButtonID=(0,d.Z)()}UNSAFE_componentWillReceiveProps(e){e.columnAdjustment!==this.props.columnAdjustment&&this.setState({sliderValue:-1*e.columnAdjustment})}componentWillUnmount(){this._clearTimeout()}_clearTimeout(){this._columnAdjustmentTimeoutID&&window.clearTimeout(this._columnAdjustmentTimeoutID)}render(){const{listType:e,listContext:t,selectedListStyle:r,allListStyles:s}=this.props,{sliderValue:i,isStylesMenuOpen:l}=this.state,{POSTER:a,MOSAIC:o,TABLE:c,SUMMARY:d,SIMPLE_SUMMARY:P}=f,E=[{listStyle:a,title:(0,u.Z)("Grid View")},{listStyle:o,title:(0,u.Z)("Mosaic View")},{listStyle:c,title:(0,u.Z)("List View")},{listStyle:d,title:(0,u.Z)("Summary View")},{listStyle:P,title:(0,u.Z)("Summary View")}],Z=f.showListStylesSlider(r),j=f.showListStylesMenu(s),I=(C=r)===f.TABLE?b.Z:C===f.SUMMARY||C===f.SIMPLE_SUMMARY?v.Z:g.Z;var C;return Z||j?n.createElement("div",{className:"MetadataListStylesMenu-stylesContainer-NSquJl"},Z?n.createElement(S.Z,{className:"MetadataListStylesMenu-slider-wDp31p Slider-slider-YdLxcK",label:(0,u.Z)("Poster Size"),max:2,min:-1,stepSize:1,value:i,onChange:this.onSliderChange}):null,n.createElement(m.Z,{"aria-label":(0,u.Z)("Show List Styles"),className:j?"MetadataListStylesMenu-stylesButtonWithArrow-qgXemN MetadataListStylesMenu-stylesButton-vVfcDS":"MetadataListStylesMenu-stylesButton-vVfcDS","data-testid":"toolbarView",id:this._stylesButtonID,isDisabled:!j,onPress:this.onStylesPress},n.createElement(I,{className:"MetadataListStylesMenu-stylesIcon-Y_eUpl"}),j?n.createElement(p.Z,{direction:l?h.UP:h.WV}):null),j?n.createElement(y.Z,{isOpen:l,target:this._stylesButtonID,onMenuClose:this.onStylesMenuClose},E.map((({listStyle:e,title:t})=>s.indexOf(e)>-1&&n.createElement(O,{key:e,isSelected:r===e,listStyle:e,title:t,onListStylePress:this.onListStylePress})))):null):null}}Z.defaultProps={selectedListStyle:f.POSTER,allListStyles:[f.POSTER],allListStyleActions:[],columnAdjustmentTimeout:500};const j=Z;var I=Object.defineProperty,C=Object.prototype.hasOwnProperty,w=Object.getOwnPropertySymbols,T=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))T.call(t,r)&&D(e,r,t[r]);return e};const A=(0,i.P1)(a.Z,(e=>({columnAdjustment:e.columnAdjustment,listStyles:e.listStyles})));class L extends n.Component{constructor(){super(...arguments),this.onColumnAdjustmentChange=e=>{(0,o.c9)((()=>{this.props.saveExperienceSettings({columnAdjustment:e})}))},this.onListStyleChange=e=>{const{listStyles:t,listType:r,listSubtype:n,listContext:s}=this.props,i=(0,c.Z)(r,n),l=M(M({},t),{[s]:M(M({},t[s]||{}),{[i]:e})});(0,o.c9)((()=>{this.props.saveExperienceSettings({listStyles:l})}))}}render(){return n.createElement(j,M(M({},this.props),{onColumnAdjustmentChange:this.onColumnAdjustmentChange,onListStyleChange:this.onListStyleChange}))}}const N=(0,s.$j)((e=>A),{saveExperienceSettings:l.LN})(L)},25502:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ye});var n=r(67294),s=r(28216),i=r(22222),l=r(47752),a=r(42985),o=r(63776);const c=function(e){const{children:t,isPending:r}=e;return r?n.createElement(o.Z,null,n.createElement(a.Z,null)):n.createElement(n.Fragment,null,t)};var u=Object.defineProperty,p=Object.prototype.hasOwnProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&d(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&d(e,r,t[r]);return e};const S=(0,i.P1)((e=>e.isWaitingForServers),l.Z,((e,t)=>({preferredServerEntityID:t&&t.entityID,isWaitingForServers:e}))),f=(0,s.$j)(S)((function(e){const t=e,{isWaitingForServers:r,preferredServerEntityID:s}=t,i=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(t,["isWaitingForServers","preferredServerEntityID"]),l=(0,n.useRef)(r);return l.current&&!r&&(l.current=r),n.createElement(c,h(h({},i),{isPending:!s&&l.current}))}));var b=r(13469),v=r.n(b),g=r(44757),P=r(62291),E=r(37920),O=r(72310),Z=r(97257),j=r(17939),I=r(48521),C=r(235),w=r(87442),T=r(73788),D=r(30471),M=r(62365),A=r(17633),L=r(69281),N=r(15859),_=r(86555),x=r(64520);const R=(0,s.$j)((function(){return(0,i.P1)((0,_.Z)(),((e={})=>({containerKey:e.skipParent?e.grandparentKey:e.parentKey})))}))(x.Z);var U=r(17950),W=r(57635),q=r(94184),V=r.n(q),k=r(51026),H=r(47435),z=r(56572),$=r(14523),B=r(16219);const F=function(e){const{className:t,serverEntityID:r,providerEntityID:s,searchResultEntityID:i,imageWidth:l,imageHeight:a,imageUrl:o,tag:c,tagType:u,librarySectionType:p,titleComponents:m}=e,y=(0,H.Z)(e),d=k.Z.get(u),h=!!d&&d.isPerson;return n.createElement("div",{className:t,style:y.style},n.createElement("div",{className:"SearchTagPosterCell-imageContainer-HuAhPo"},n.createElement($.Z,{imageHeight:a,imageUrl:o,imageWidth:l,librarySectionType:p,providerEntityID:s,serverEntityID:r,tag:c,tagType:u,title:c}),n.createElement(B.Z,{className:V()("SearchTagPosterCell-imageLink-yTzS8o",h&&"SearchTagPosterCell-isPerson-dpL5Uu"),providerEntityID:s,searchResultEntityID:i,serverEntityID:r})),n.createElement("div",{className:"SearchTagPosterCell-titleContainer-dz6mdo"},m.map(((e,t)=>n.createElement(z.Z,{key:t,component:e,isSecondary:t>0,providerEntityID:s,searchResultEntityID:i,serverEntityID:r})))))};var Y=Object.defineProperty,K=Object.prototype.hasOwnProperty,J=Object.getOwnPropertySymbols,X=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Q=(0,s.$j)((function(){return(0,i.P1)(((e,{listType:t})=>t),((e,{listSubtype:t})=>t),((e,{listContext:t})=>t),((e,{cellWidth:t})=>t),(0,U.Z)(),((e,t,r,n,s={})=>{const i=s.tagItem,{tag:l,tagType:a,librarySectionType:o}=i,c=(0,W.Z)(n,null,e,t,i,r);return{tag:l,tagType:a,librarySectionType:o,imageWidth:c.width,imageHeight:c.height,imageUrl:c.url}}))}))((function(e){return n.createElement(F,((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&G(e,r,t[r]);if(J)for(var r of J(t))X.call(t,r)&&G(e,r,t[r]);return e})({},e))}));var ee=Object.defineProperty,te=Object.prototype.hasOwnProperty,re=Object.getOwnPropertySymbols,ne=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ne.call(t,r)&&se(e,r,t[r]);return e};const le=function(e){var t=e,{isMetadataItem:r}=t,s=((e,t)=>{var r={};for(var n in e)te.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&ne.call(e,n)&&(r[n]=e[n]);return r})(t,["isMetadataItem"]);return r?n.createElement(R,ie(ie({},s),{showSelect:!1})):n.createElement(Q,ie({},s))};var ae=r(78521),oe=r(168),ce=r(46682);var ue=Object.defineProperty,pe=Object.prototype.hasOwnProperty,me=Object.getOwnPropertySymbols,ye=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(me)for(var r of me(t))ye.call(t,r)&&de(e,r,t[r]);return e};const Se=function(e){const{title:t,sourceTitle:r,hubs:s,columnAdjustment:i,isSearchPending:l,isSearchPopulated:c}=e,u=r?`${t} - ${r}`:t;return n.createElement("div",null,n.createElement("div",{"aria-level":"2",className:"SearchProviderHubs-providerTitle-pTs8rI",role:"heading"},u,l?n.createElement(a.Z,{className:"SearchProviderHubs-spinner-LCtfAZ",size:L.HC}):null),!s.length&&c?n.createElement(o.Z,{description:(0,T.Z)("Try a different query"),title:(0,T.Z)("No Results")}):s.map((e=>{const t=e.type,r=e.subtype,s=A.mo,l=(0,ce.Z)(t,s,{subtype:e.subtype,isSearch:!0,isSearchAll:!0});return n.createElement(N.Z,he(he({},e),{key:e.hubIdentifier,cellRenderer:(a={listType:t,listContext:s,titleComponents:l},e=>n.createElement(ae.Z,he(he({component:le},a),e))),items:e.results,itemsOffset:0,keyPropName:"searchResultEntityID",layout:(0,oe.Z)(t,r,s,i,l.length),listContext:s,listType:t,size:e.results.length}));var a})))};var fe=Object.defineProperty,be=Object.prototype.hasOwnProperty,ve=Object.getOwnPropertySymbols,ge=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ee=function(e){const{isSearchCapable:t,providers:r,columnAdjustment:s}=e;return t?n.createElement(D.Z,{innerClassName:"SearchPageContent-content-yuOMi4 PageContent-innerPageContent-m6ARXd"},r.map((e=>n.createElement(Se,((e,t)=>{for(var r in t||(t={}))be.call(t,r)&&Pe(e,r,t[r]);if(ve)for(var r of ve(t))ge.call(t,r)&&Pe(e,r,t[r]);return e})({key:e.providerEntityID,columnAdjustment:s},e))))):n.createElement(M.Z,{description:(0,T.Z)("Browse libraries using the sidebar"),title:(0,T.Z)("This server does not support search")})};var Oe=Object.defineProperty,Ze=Object.prototype.hasOwnProperty,je=Object.getOwnPropertySymbols,Ie=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function we(){return(0,j.Z)((0,i.P1)(I.Z,(e=>e.reduce(((e,{server:t,provider:r})=>t&&r&&t.isConnected?(e[r.entityID]={serverEntityID:t.entityID,identifier:r.identifier,title:r.title,sourceTitle:r.sourceTitle},e):e),{}))),(e=>e))}const Te={fetchSearchPage:g.ES,clearSearchPage:g.Nu};class De extends n.Component{UNSAFE_componentWillMount(){(0,w.c9)((()=>{this._clear(),this._populate()}))}UNSAFE_componentWillReceiveProps(e){const t=e.query!==this.props.query,r=e.availableProviders!==this.props.availableProviders;(t||r)&&(0,w.c9)((()=>{t&&this._clear(e),this._populate(e)}))}_clear(e=this.props){e.clearSearchPage()}_populate(e=this.props){e.fetchSearchPage({availableProviders:e.availableProviders,query:e.query,limit:30})}render(){return n.createElement(Ee,((e,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&Ce(e,r,t[r]);if(je)for(var r of je(t))Ie.call(t,r)&&Ce(e,r,t[r]);return e})({},this.props))}}const Me=(0,s.$j)((function(){return(0,i.P1)(we(),(0,i.P1)((e=>e.ui.searchPage.searches),we(),((e,t)=>{const r=e.reduce(((e,r)=>{const n=r.providerEntityID,s=t[n];if(!s)return e;let i=e[s.identifier];return i||(i=e[s.identifier]={providerEntityID:n,title:s.title,sourceTitle:s.sourceTitle,isSearchPending:!1,isSearchPopulated:!1,hubs:{}}),r.isSearchPending&&(i.isSearchPending=!0),r.isSearchPopulated&&(i.isSearchPopulated=!0),r.hubs.forEach((e=>{const t=e=>({serverEntityID:s.serverEntityID,providerEntityID:n,searchResultEntityID:e}),r=e.metadataResults.map(t),l=e.tagResults.map(t),a=i.hubs[e.hubIdentifier];a?(a.size+=e.size,a.results=a.results.concat(r,l)):i.hubs[e.hubIdentifier]={hubIdentifier:e.hubIdentifier,size:e.size,type:e.type,title:e.title,results:[].concat(r,l)}})),e}),{});return v().map(r,(e=>({providerEntityID:e.providerEntityID,title:e.title,sourceTitle:e.sourceTitle,isSearchPending:e.isSearchPending,isSearchPopulated:e.isSearchPopulated,hubs:v().values(e.hubs)})))})),C.Z,((e,t,r)=>({availableProviders:e,isSearchCapable:!!Object.keys(e).length,columnAdjustment:r.columnAdjustment,providers:t})))}),Te)(De);function Ae({className:e,children:t}){return n.createElement("div",{className:e},t)}Ae.defaultProps={className:"PageHeaderCenter-pageHeaderCenter-mMF86x"};const Le=Ae;var Ne=r(54768),_e=r(90792),xe=r(23574),Re=r(69139);const Ue=function(e){const{isSearchPending:t,query:r}=e;return n.createElement(xe.Z,null,n.createElement(Ne.Z,null,(0,T.Z)("Search All Sources")),n.createElement(Le,null,n.createElement("span",null,t?(0,T.Z)('Searching for "{query}"',{query:r}):(0,T.Z)('Results for "{query}"',{query:r})),t?n.createElement(a.Z,{className:"SearchPageHeader-spinner-n4JU73",size:L.HC}):null),n.createElement(_e.Z,null,n.createElement(Re.Z,null)))},We=function(e){const{isSearchPending:t}=e,{query:r}=(0,O.Z)();return n.createElement(Z.Z,{metricsPage:P.fP,scrollDirection:E.Hn},n.createElement(Ue,{isSearchPending:t,query:r}),n.createElement(Me,{query:r}))};var qe=Object.defineProperty,Ve=Object.prototype.hasOwnProperty,ke=Object.getOwnPropertySymbols,He=Object.prototype.propertyIsEnumerable,ze=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $e={clearSearchPage:g.Nu};class Be extends n.Component{componentWillUnmount(){this.props.clearSearchPage()}render(){return n.createElement(We,((e,t)=>{for(var r in t||(t={}))Ve.call(t,r)&&ze(e,r,t[r]);if(ke)for(var r of ke(t))He.call(t,r)&&ze(e,r,t[r]);return e})({},this.props))}}const Fe=(0,s.$j)((function(){return(0,i.P1)((e=>e.ui.searchPage),(e=>({isSearchPending:!!v().findWhere(e.searches,{isSearchPending:!0})})))}),$e)(Be);function Ye(){return n.createElement(f,null,n.createElement(Fe,null))}},36795:(e,t,r)=>{function n(e,t){return t?`${e}-${t}`:e}r.d(t,{Z:()=>n})}}]);