(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[927],{48927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var n=r(37703),o=r(22222),a=r(99051),l=r(67294),c=r(69605),i=r(53790),s=r(39571),d=r(66102),u=r(50362),p=r(14699),m=r(58368),f=r(58858),b=r(18676),y=r(75774),S=r(45610),g=r(15378),v=r(84388),w=r(12986),O=r(46565),M=r(5562),E=r(58300),h=r(40691),C=r(13202),Z=Object.defineProperty,P=Object.prototype.hasOwnProperty,j=Object.getOwnPropertySymbols,D=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&k(e,r,t[r]);if(j)for(var r of j(t))D.call(t,r)&&k(e,r,t[r]);return e};const A=function(e){const{errorMessage:t,isMediaSubscriptionSaving:r,prefGroups:n,className:o,onModalClose:a,onSubmit:c}=e,i=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))t.indexOf(n)<0&&D.call(e,n)&&(r[n]=e[n]);return r})(e,["errorMessage","isMediaSubscriptionSaving","prefGroups","className","onModalClose","onSubmit"]),s=(0,w.Z)(r)&&!r;return(0,l.useEffect)((()=>{s&&!t&&a()}),[t,s,a]),l.createElement(b.ZP,{className:o,onSubmit:c},l.createElement(v.Z,null,(0,M.Z)("Download Options")),t?l.createElement(h.Z,{errorMessage:t}):null,l.createElement(y.Z,null,l.createElement("div",{key:"advanced"},l.createElement(C.Z,x(x({},i),{prefs:n.advanced})))),l.createElement(S.Z,null,l.createElement(g.Z,null,l.createElement(f.Z,{kind:O.TP,onPress:a},(0,M.Z)("Cancel")),l.createElement(E.Z,{type:"submit",isSpinning:r,kind:O._8},(0,M.Z)("Save")))))};var I=Object.defineProperty,K=Object.prototype.hasOwnProperty,_=Object.getOwnPropertySymbols,N=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,G=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&T(e,r,t[r]);if(_)for(var r of _(t))N.call(t,r)&&T(e,r,t[r]);return e},L=(e,t)=>{var r={};for(var n in e)K.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&_)for(var n of _(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r};const U=new Set(["autoDeletionItemPolicyUnwatchedLibrary","autoDeletionItemPolicyWatchedLibrary"]),$={dispatchSyncDownloadModalChangeTemplateMode:a.Jl,dispatchSyncDownloadSaveSubscription:a.Y1},q=(0,n.$j)((function(){return(0,o.P1)(((e,{modal:t})=>t),(0,p.Z)(),(0,o.P1)((e=>e.downloads.states),((e,{modal:t})=>t),((e,t)=>{const{sourceAttr:r,ratingKey:n}=t;return e.some((e=>e.ratingKey===n&&e.sourceAttr===r&&"saving"===e.state))})),u.Z,((e,t,r,n)=>{const{hint:o}=t,a=t.target&&n[t.target.metadata],l=(0,m.Z)(t.prefs,U);return{errorMessage:e.error,hint:o,isMediaSubscriptionSaving:r,prefGroups:l,target:a}}))}),$)((function(e){const{dispatchSyncDownloadModalChangeTemplateMode:t,dispatchSyncDownloadSaveSubscription:r,modal:n}=e,o=L(e,["dispatchSyncDownloadModalChangeTemplateMode","dispatchSyncDownloadSaveSubscription","modal"]),{ratingKey:a,sourceAttr:c}=n,i=(0,l.useCallback)((e=>{const{mode:t}=e,n=L(e,["mode"]);r({prefs:n,ratingKey:a,sourceAttr:c})}),[a,c,r]);return l.createElement(A,G(G({},o),{onSubmit:i}))})),z=function(e){const{isOpen:t,modal:r,onSyncDownloadModalClose:n}=e,{error:o,mediaSubscription:a,ratingKey:u,sourceAttr:p}=r,m=(0,l.useCallback)((()=>{n({ratingKey:u,sourceAttr:p})}),[u,p,n]);return l.createElement(i.Z,{isOpen:t,metricsPage:c.B8,onModalClose:m},o&&!a?l.createElement(d.Z,{message:o,onModalClose:m}):l.createElement(s.Z,{onModalClose:m},l.createElement(q,{className:"SyncDownloadModal-formContent-2qUtoR ModalContent-modalContent-rkHSzL",modal:r,mediaSubscriptionEntityID:a,onModalClose:m})))};var B=Object.defineProperty,H=Object.prototype.hasOwnProperty,J=Object.getOwnPropertySymbols,R=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&W(e,r,t[r]);if(J)for(var r of J(t))R.call(t,r)&&W(e,r,t[r]);return e};const F=(0,o.P1)((function(e){return e.ui.syncDownloadModals}),(e=>({modal:e.find((e=>e.isOpen))}))),Q={onSyncDownloadModalClose:a.yr},V=(0,n.$j)(F,Q)((function(e){return e.modal?l.createElement(z,Y(Y({},e),{isOpen:!0})):null}))}}]);