(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[927],{14699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(22222),o=n(90934);function a(){return(0,r.P1)(((e,{mediaSubscriptionEntityID:t})=>t),o.Z,((e,t)=>t[e]))}},48927:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n(89969),o=n(22222),a=n(99051),l=n(67294),c=n(69605),i=n(2424),s=n(64795),u=n(66102),d=n(50362),p=n(14699),m=n(58368),f=n(5562),b=n(22745),y=n(37084),S=n(70182),v=n(79849),g=n(56510),w=n(89460),O=n(30464),M=n(60528),E=n(58300),Z=n(40691),h=n(13202),C=Object.defineProperty,P=Object.prototype.hasOwnProperty,D=Object.getOwnPropertySymbols,j=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&k(e,n,t[n]);if(D)for(var n of D(t))j.call(t,n)&&k(e,n,t[n]);return e};const x=function(e){const t=e,{errorMessage:n,isMediaSubscriptionSaving:r,prefGroups:o,className:a,onModalClose:c,onSubmit:i}=t,s=((e,t)=>{var n={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&D)for(var r of D(e))t.indexOf(r)<0&&j.call(e,r)&&(n[r]=e[r]);return n})(t,["errorMessage","isMediaSubscriptionSaving","prefGroups","className","onModalClose","onSubmit"]),u=(0,O.Z)(r)&&!r;return(0,l.useEffect)((()=>{u&&!n&&c()}),[n,u,c]),l.createElement(y.ZP,{className:a,onSubmit:i},l.createElement(w.Z,null,(0,f.Z)("Download Options")),n?l.createElement(Z.Z,{errorMessage:n}):null,l.createElement(S.Z,null,l.createElement("div",{key:"advanced"},l.createElement(h.Z,I(I({},s),{prefs:o.advanced})))),l.createElement(v.Z,null,l.createElement(g.Z,null,l.createElement(b.Z,{kind:M.TP,onPress:c},(0,f.Z)("Cancel")),l.createElement(E.Z,{type:"submit",isSpinning:r,kind:M._8},(0,f.Z)("Save")))))};var A=Object.defineProperty,K=Object.prototype.hasOwnProperty,T=Object.getOwnPropertySymbols,_=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t)=>{for(var n in t||(t={}))K.call(t,n)&&N(e,n,t[n]);if(T)for(var n of T(t))_.call(t,n)&&N(e,n,t[n]);return e},L=(e,t)=>{var n={};for(var r in e)K.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&T)for(var r of T(e))t.indexOf(r)<0&&_.call(e,r)&&(n[r]=e[r]);return n};const U=new Set(["autoDeletionItemPolicyUnwatchedLibrary","autoDeletionItemPolicyWatchedLibrary"]),$={dispatchSyncDownloadModalChangeTemplateMode:a.Jl,dispatchSyncDownloadSaveSubscription:a.Y1},q=(0,r.$j)((function(){return(0,o.P1)(((e,{modal:t})=>t),(0,p.Z)(),(0,o.P1)((e=>e.downloads.states),((e,{modal:t})=>t),((e,t)=>{const{sourceAttr:n,ratingKey:r}=t;return e.some((e=>e.ratingKey===r&&e.sourceAttr===n&&"saving"===e.state))})),d.Z,((e,t,n,r)=>{const{hint:o}=t,a=t.target&&r[t.target.metadata],l=(0,m.Z)(t.prefs,U);return{errorMessage:e.error,hint:o,isMediaSubscriptionSaving:n,prefGroups:l,target:a}}))}),$)((function(e){const t=e,{dispatchSyncDownloadModalChangeTemplateMode:n,dispatchSyncDownloadSaveSubscription:r,modal:o}=t,a=L(t,["dispatchSyncDownloadModalChangeTemplateMode","dispatchSyncDownloadSaveSubscription","modal"]),{ratingKey:c,sourceAttr:i}=o,s=(0,l.useCallback)((e=>{const t=e,{mode:n}=t,o=L(t,["mode"]);r({prefs:o,ratingKey:c,sourceAttr:i})}),[c,i,r]);return l.createElement(x,G(G({},a),{onSubmit:s}))})),B=function(e){const{isOpen:t,modal:n,onSyncDownloadModalClose:r}=e,{error:o,mediaSubscription:a,ratingKey:d,sourceAttr:p}=n,m=(0,l.useCallback)((()=>{r({ratingKey:d,sourceAttr:p})}),[d,p,r]);return l.createElement(i.Z,{isOpen:t,metricsPage:c.B8,onModalClose:m},o&&!a?l.createElement(u.Z,{message:o,onModalClose:m}):l.createElement(s.Z,{onModalClose:m},l.createElement(q,{className:"SyncDownloadModal-formContent-2qUtoR ModalContent-modalContent-12mSTV",modal:n,mediaSubscriptionEntityID:a,onModalClose:m})))};var J=Object.defineProperty,R=Object.prototype.hasOwnProperty,V=Object.getOwnPropertySymbols,W=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&Y(e,n,t[n]);if(V)for(var n of V(t))W.call(t,n)&&Y(e,n,t[n]);return e};const F=(0,o.P1)((function(e){return e.ui.syncDownloadModals}),(e=>({modal:e.find((e=>e.isOpen))}))),H={onSyncDownloadModalClose:a.yr},Q=(0,r.$j)(F,H)((function(e){return e.modal?l.createElement(B,z(z({},e),{isOpen:!0})):null}))}}]);