"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[230],{35343:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(22222),o=n(89186);function a(){return(0,r.P1)(((e,{mediaSubscriptionEntityID:t})=>t),o.Z,((e,t)=>t[e]))}},37230:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(28216),o=n(22222),a=n(17949),l=n(67294),i=n(62291),c=n(55949),s=n(88140),u=n(27901),d=n(97797),p=n(35343),m=n(13886),f=n(73788),b=n(18222),y=n(70668),S=n(63135),v=n(74249),g=n(45181),w=n(17516),O=n(23245),M=n(25555),E=n(17330),Z=n(36380),h=n(95847),C=Object.defineProperty,P=Object.prototype.hasOwnProperty,D=Object.getOwnPropertySymbols,j=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&k(e,n,t[n]);if(D)for(var n of D(t))j.call(t,n)&&k(e,n,t[n]);return e};const K=function(e){const t=e,{errorMessage:n,isMediaSubscriptionSaving:r,prefGroups:o,className:a,onModalClose:i,onSubmit:c}=t,s=((e,t)=>{var n={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&D)for(var r of D(e))t.indexOf(r)<0&&j.call(e,r)&&(n[r]=e[r]);return n})(t,["errorMessage","isMediaSubscriptionSaving","prefGroups","className","onModalClose","onSubmit"]),u=(0,O.Z)(r)&&!r;return(0,l.useEffect)((()=>{u&&!n&&i()}),[n,u,i]),l.createElement(y.ZP,{className:a,onSubmit:c},l.createElement(w.Z,null,(0,f.Z)("Download Options")),n?l.createElement(Z.Z,{errorMessage:n}):null,l.createElement(S.Z,null,l.createElement("div",{key:"advanced"},l.createElement(h.Z,I(I({},s),{prefs:o.advanced})))),l.createElement(v.Z,null,l.createElement(g.Z,null,l.createElement(b.Z,{kind:M.TP,onPress:i},(0,f.Z)("Cancel")),l.createElement(E.Z,{isSpinning:r,kind:M._8,type:"submit"},(0,f.Z)("Save")))))};var x=Object.defineProperty,A=Object.prototype.hasOwnProperty,_=Object.getOwnPropertySymbols,N=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t)=>{for(var n in t||(t={}))A.call(t,n)&&T(e,n,t[n]);if(_)for(var n of _(t))N.call(t,n)&&T(e,n,t[n]);return e},B=(e,t)=>{var n={};for(var r in e)A.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&_)for(var r of _(e))t.indexOf(r)<0&&N.call(e,r)&&(n[r]=e[r]);return n};const L=new Set(["autoDeletionItemPolicyUnwatchedLibrary","autoDeletionItemPolicyWatchedLibrary"]),$={dispatchSyncDownloadModalChangeTemplateMode:a.Jl,dispatchSyncDownloadSaveSubscription:a.Y1},F=(0,r.$j)((function(){return(0,o.P1)(((e,{modal:t})=>t),(0,p.Z)(),(0,o.P1)((e=>e.downloads.states),((e,{modal:t})=>t),((e,t)=>{const{sourceAttr:n,ratingKey:r}=t;return e.some((e=>e.ratingKey===r&&e.sourceAttr===n&&"saving"===e.state))})),d.Z,((e,t,n,r)=>{const{hint:o}=t,a=t.target&&r[t.target.metadata],l=(0,m.Z)(t.prefs,L);return{errorMessage:e.error,hint:o,isMediaSubscriptionSaving:n,prefGroups:l,target:a}}))}),$)((function(e){const t=e,{dispatchSyncDownloadModalChangeTemplateMode:n,dispatchSyncDownloadSaveSubscription:r,modal:o}=t,a=B(t,["dispatchSyncDownloadModalChangeTemplateMode","dispatchSyncDownloadSaveSubscription","modal"]),{ratingKey:i,sourceAttr:c}=o,s=(0,l.useCallback)((e=>{const t=e,{mode:n}=t,o=B(t,["mode"]);r({prefs:o,ratingKey:i,sourceAttr:c})}),[i,c,r]);return l.createElement(K,G(G({},a),{onSubmit:s}))})),J=function(e){const{isOpen:t,modal:n,onSyncDownloadModalClose:r}=e,{error:o,mediaSubscription:a,ratingKey:d,sourceAttr:p}=n,m=(0,l.useCallback)((()=>{r({ratingKey:d,sourceAttr:p})}),[d,p,r]);return l.createElement(c.Z,{isOpen:t,metricsPage:i.B8,onModalClose:m},o&&!a?l.createElement(u.Z,{message:o,onModalClose:m}):l.createElement(s.Z,{onModalClose:m},l.createElement(F,{className:"SyncDownloadModal-formContent-iDFo2i ModalContent-modalContent-_BsQSK",mediaSubscriptionEntityID:a,modal:n,onModalClose:m})))};var Q=Object.defineProperty,U=Object.prototype.hasOwnProperty,W=Object.getOwnPropertySymbols,Y=Object.prototype.propertyIsEnumerable,q=(e,t,n)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))U.call(t,n)&&q(e,n,t[n]);if(W)for(var n of W(t))Y.call(t,n)&&q(e,n,t[n]);return e};const H=(0,o.P1)((function(e){return e.ui.syncDownloadModals}),(e=>({modal:e.find((e=>e.isOpen))}))),R={onSyncDownloadModalClose:a.yr},V=(0,r.$j)(H,R)((function(e){return e.modal?l.createElement(J,z(z({},e),{isOpen:!0})):null}))}}]);