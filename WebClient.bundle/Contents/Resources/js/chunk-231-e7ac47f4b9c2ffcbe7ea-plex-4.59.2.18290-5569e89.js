(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[231],{58730:(e,t,r)=>{"use strict";r.d(t,{I:()=>l,w:()=>n});const l="boolean",n="other"},52331:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var l=r(13469),n=r.n(l),a=r(96638),i=(r(11133),r(58730)),o=Object.defineProperty,s=Object.prototype.hasOwnProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e},y=r(70560),d=r(23736);const v=`([^&!=<>]+)(${y.ZP.sort(((e,t)=>t.length-e.length)).map(a.Z).join("|")})([^&]+)?`,f=new RegExp(v,"g"),b=new RegExp(v),Z={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};function g(e){if(!e)return[];const t=decodeURIComponent(e).match(f);return t?t.reduce(((e,t)=>{const r=t.match(b),[,l,a,o]=r||[];let s=o?n().uniq(o.split(d.OR)):"";return 1===s.length&&(s=s[0]),function(e,t,r){const l=[...e];if(r.type===i.I){const e=n().findIndex(l,(e=>e.key===t)),a=-1===e?0:e,i=p({key:t},r);-1===e?l.push(i):l.splice(a,1,i)}else n().findWhere(l,{key:t,value:r.value})||l.push(p({key:t},r));return l}(e,l,{value:s,type:Z[l]?i.I:i.w,operator:a})}),[]):[]}},96015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c}),r(13469),r(11133);var l=Object.defineProperty,n=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,o=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&o(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&o(e,r,t[r]);return e};function c(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const l=[...e];let n=l.length;for(;n-- >0;){const e=l[n],a=e.key,i=e.value;if(t===a&&r===i)l.splice(n,1);else if(t===a&&Array.isArray(i)){const t=i.indexOf(r);t>-1&&(i.splice(t,1),1===i.length?l.splice(n,1,s(s({},e),{value:i[0]})):i.length||l.splice(n,1))}}return l}},45318:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(67294),n=r(39409),a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){return l.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&c(e,r,t[r]);return e})({},e))}u.defaultProps={className:"PageHeaderBadge-badge-2Rd-zv"};const m=u},99517:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var l=r(22222),n=r(18409),a=r(70617),i=r(38992);const o=(0,a.Z)((function(e){return(0,l.P1)((0,i.Z)(e),(e=>e.accounts.slice().sort(n.Z)))}))},18409:(e,t,r)=>{"use strict";function l(e,t){if(1===e.id)return-1;if(1===t.id)return 1;const r=e.name.trim().toUpperCase(),l=t.name.trim().toUpperCase();return r<l?-1:r>l?1:0}r.d(t,{Z:()=>l})},70449:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var l=r(67294),n=r(5562),a=r(26253),i=r(72373);const o={sortDirectionIcon:"IconTableHeaderSortDirection-sortDirectionIcon-kvhk_W"};var s=Object.defineProperty,c=Object.prototype.hasOwnProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){var t=e,{className:r=o.sortDirectionIcon,isAscending:s=!0}=t,y=((e,t)=>{var r={};for(var l in e)c.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&u)for(var l of u(e))t.indexOf(l)<0&&m.call(e,l)&&(r[l]=e[l]);return r})(t,["className","isAscending"]);const d=s?a.Z:i.Z;return l.createElement(d,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&p(e,r,t[r]);return e})({className:r,"aria-label":s?(0,n.Z)("Ascending"):(0,n.Z)("Descending")},y))}},58050:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(67294);const n={tableCell:"TableCell-tableCell-3_jfgf",activeTableCell:"TableCell-activeTableCell-1IP8PN TableCell-tableCell-3_jfgf",title:"TableCell-title-3rv80l"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&c(e,r,t[r]);return e};function m(e){var t=e,{className:r=n.title,cellClassName:a=n.tableCell,activeCellClassName:c=n.activeTableCell,style:m,component:p,type:y,isActiveSort:d}=t,v=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r})(t,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return l.createElement("div",{className:d?c:a,style:m},l.createElement(p,u(u({},v),{className:r})))}},25369:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(67294);const n={tableHeader:"TableHeader-tableHeader-2HmQLv"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&c(e,r,t[r]);return e};function m(e){var t=e,{className:r=n.tableHeader}=t,a=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r})(t,["className"]);return l.createElement("div",u(u({},a),{className:r}))}},76764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(67294);const n={tableHeaderCell:"TableHeaderCell-tableHeaderCell-2wlnA0 TableCell-tableCell-3_jfgf",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-1argHJ TableHeaderCell-tableHeaderCell-2wlnA0 TableCell-tableCell-3_jfgf"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&c(e,r,t[r]);return e};function m(e){var t=e,{className:r=n.tableHeaderCell,activeClassName:a=n.activeTableHeaderCell,children:c,isActive:m=!1}=t,p=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r})(t,["className","activeClassName","children","isActive"]);const y=m?a:r;return l.createElement("span",u(u({},p),{className:y}),c)}},5718:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var l=r(67294),n=r(17331);const a={tableHeaderLink:"TableHeaderLink-tableHeaderLink-GyNnjS Link-link-2WGTd7"};var i=Object.defineProperty,o=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&u(e,r,t[r]);if(s)for(var r of s(t))c.call(t,r)&&u(e,r,t[r]);return e};function p(e){var t=e,{className:r=a.tableHeaderLink,children:i}=t,u=((e,t)=>{var r={};for(var l in e)o.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&c.call(e,l)&&(r[l]=e[l]);return r})(t,["className","children"]);return l.createElement(n.Z,m(m({},u),{className:r}),i)}},90317:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(67294);const n={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-2VRXAy"};var a=Object.defineProperty,i=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&c(e,r,t[r]);return e};function m(e){var t=e,{className:r=n.tableHeaderTitle,children:a}=t,c=((e,t)=>{var r={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r})(t,["className","children"]);return l.createElement("span",u(u({},c),{className:r}),a)}},17231:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>mt});var l=r(67294),n=r(69605),a=r(31235),i=r(74309),o=r(2200),s=r(1346),c=r(75989),u=r(31446),m=r(89969),p=r(52331),y=r(27082),d=r(53334),v=r(14408),f=r(93683),b=r(56442),Z=r(84936),g=r(12634);const h=d.Z.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:v.Z.string,parentKey:v.Z.string,grandparentKey:v.Z.string,title:v.Z.string,parentTitle:v.Z.string,grandparentTitle:v.Z.string,type:v.Z.string,thumb:v.Z.string,parentThumb:v.Z.string,grandparentThumb:v.Z.string,grandparentArt:v.Z.string,index:v.Z.integer,parentIndex:v.Z.integer,originallyAvailableAt:v.Z.string,viewedAt:v.Z.integer,accountID:v.Z.integer,deviceID:v.Z.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),O=g.Z.extend({name:"PlayHistoryListItemCollection",context:["server"],model:h});d.Z.extend({mixins:[f.Z],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:b.AV,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=Z.Z.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:v.Z.integer,currentPageSize:v.Z.integer,populatedRange:v.Z.object},syncedAttrs:{totalSize:v.Z.integer},syncedRelations:{items:{relationClass:O,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var P=r(74395),w=r(23306),E=r(19595),I=r(24906),T=r(57138),k=r(5623);function C(e,t){return!!e&&e.some((e=>e.key===t))}var j=r(5562),N=r(13550);var H=r(22222),S=r(38992);var x=r(86626),A=r(69881),M=r(31212),F=r(48903),D=r(96051);const R={key:"user",title:()=>(0,j.Z)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{accountID:n}=t,i=(0,l.useMemo)((()=>((e,t)=>(0,H.P1)((0,S.Z)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,n)),[n,r.machineIdentifier]),o=(0,m.v9)(i);return o?l.createElement("span",{className:e,title:o.name},o.name):l.createElement("span",{className:e},(0,j.Z)("Unknown User"))},style:{flex:"1 1 250px"}},L={key:"type",title:()=>(0,j.Z)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,n=(0,A.getMetadataType)(r);return n?l.createElement("span",{className:e,title:n.title},n.title):null},style:{flex:"0 1 120px"}},X={key:"title",title:()=>(0,j.Z)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,N.Z)(t);return l.createElement("span",{className:e},l.createElement("div",{className:"PlayHistoryTableTitle-titleContainer-21J4XQ"},l.createElement("span",{className:"PlayHistoryTableTitle-title-1jQ9O-",title:r},r)))},style:{flex:"2 0 350px"}},U={key:"player",title:()=>(0,j.Z)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,m.v9)((0,x.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.name},i.name):l.createElement("span",{className:e},(0,j.Z)("Unknown"))},style:{flex:"1 1 150px"}},_={key:"platform",title:()=>(0,j.Z)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,m.v9)((0,x.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.platform},i.platform):l.createElement("span",{className:e},(0,j.Z)("Unknown"))},style:{flex:"1 1 150px"}},z=[{key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,j.Z)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,n=(0,m.v9)(F.Z),a=(0,M.Z)(1e3*r,`${n} MMM d, yyyy`);return l.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}}];var K=r(20272),q=r(38770),G=r(75157),W=r(7796),V=r(14146);const B=parseInt(W.Z.tableRowHeight,10),Q=(0,V.Z)({rowHeight:B,overscan:20});var J=r(68809),Y=r(80367),$=r(63919),ee=r(7203),te=r(49228);const re=(0,H.P1)(te.Z,(e=>e.playHistory));var le=r(17331),ne=r(58050),ae=r(54778),ie=r(6638);function oe({style:e,cellIndex:t}){return l.createElement("div",{className:t%2?"PlayHistoryTableRowLoading-alternateLoadingItem-116pvP PlayHistoryTableRowLoading-loadingItem-1F9PsX":"PlayHistoryTableRowLoading-loadingItem-1F9PsX",style:e},(0,j.Z)("Loading..."))}var se=Object.prototype.hasOwnProperty,ce=Object.getOwnPropertySymbols,ue=Object.prototype.propertyIsEnumerable;function me(e){var t=e,{item:r,activeTableColumns:n}=t,i=((e,t)=>{var r={};for(var l in e)se.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&ce)for(var l of ce(e))t.indexOf(l)<0&&ue.call(e,l)&&(r[l]=e[l]);return r})(t,["item","activeTableColumns"]);const[o]=(0,a.c9)(),s=(0,ae.Z)(i);let c;if(null==r?void 0:r.key){const e=n.some((e=>"title"===e.key)),t=r.type===A.TRACK?r.parentKey:r.key;c=e?(0,ie.Z)(o,{isLibraryProvider:!0},t):void 0}return r?l.createElement("div",{className:i.cellIndex%2?"PlayHistoryTableRow-alternateItem-2VXaDm PlayHistoryTableRow-item-nThGvm":"PlayHistoryTableRow-item-nThGvm",style:s.style},l.createElement(le.Z,{className:"PlayHistoryTableRow-columns-So_9m2 Link-link-2WGTd7","aria-label":r.title,to:c,isDisabled:!c},n.map((({style:e,component:t},n)=>l.createElement(ne.Z,{key:n,style:e,component:t,playHistoryItem:r}))))):l.createElement(oe,{style:s.style,cellIndex:i.cellIndex})}var pe=Object.defineProperty,ye=Object.prototype.hasOwnProperty,de=Object.getOwnPropertySymbols,ve=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(de)for(var r of de(t))ve.call(t,r)&&fe(e,r,t[r]);return e};function Ze({activeTableColumns:e,activeFilters:t,activeSort:r}){const n=(0,m.I0)(),[i]=(0,a.c9)(),o=(0,m.v9)(re),s=(0,m.v9)((0,x.Z)(i.machineIdentifier)),{items:c,totalSize:u,isPopulated:p,error:y}=o,{isPopulated:d,error:v}=s,f=(0,l.useCallback)((e=>{n(k.Z.actions.fetchRangeRequested(be(be({},e),{server:i,filters:t,sort:r})))}),[n,i,t,r]),b=(0,l.useMemo)((()=>t=>l.createElement(me,be(be({},t),{activeTableColumns:e}))),[e]);return p&&u&&(d||v)?l.createElement($.Z,{className:"PlayHistoryList-playHistoryListPageContent-1REOIr PageContent-pageContentScroller-18TqCp Scroller-scroller-3Rbtv0",items:c,totalSize:u,layout:Q,cellComponentFactory:b,onPageRequest:f}):p&&!u?l.createElement(J.Z,{title:(0,j.Z)("Nothing to see here"),description:(0,j.Z)("Snuggle up on the couch and play something!")}):y?l.createElement(Y.Z,null):l.createElement(J.Z,null,l.createElement(ee.Z,null))}var ge=r(45318),he=r(41859),Oe=r(24351),Pe=r(24754),we=r(7118),Ee=r(58730),Ie=r(96015),Te=(r(11133),Object.defineProperty),ke=Object.prototype.hasOwnProperty,Ce=Object.getOwnPropertySymbols,je=Object.prototype.propertyIsEnumerable,Ne=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function He(e,t,r){const l=[...e],n=l.findIndex((e=>e.key===t)),a=-1===n?0:n,i=((e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Ne(e,r,t[r]);if(Ce)for(var r of Ce(t))je.call(t,r)&&Ne(e,r,t[r]);return e})({key:t},r);return-1===n?l.push(i):l.splice(a,1,i),l}var Se=r(74287),xe=r(9119),Ae=r(75534),Me=r(99517),Fe=r(46905),De=r(46525),Re=Object.defineProperty,Le=Object.prototype.hasOwnProperty,Xe=Object.getOwnPropertySymbols,Ue=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ze=(e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&_e(e,r,t[r]);if(Xe)for(var r of Xe(t))Ue.call(t,r)&&_e(e,r,t[r]);return e};let Ke,qe;function Ge(e,t=window.location.hash){const r=function(e){if(Ke===e)return qe;const t=e.split("?"),r=t.length>1?t[1]:void 0,l=r?Z.Z.parseParams(r):{};return Ke=e,qe={url:t[0],params:l},qe}(t);return Z.Z.join(r.url,ze(ze({},r.params),{filters:(0,De.Z)(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort}))}var We=r(55278);function Ve({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n]=(0,a.c9)(),i=(0,Ae.Z)(),o=(0,Fe.Z)(),s=(0,l.useMemo)((()=>({key:"",title:(0,j.Z)("All Users")})),[]),c=(0,m.v9)((0,Me.Z)(n.machineIdentifier)),u=(0,l.useMemo)((()=>c.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[s])),[c,s]),p=(0,l.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?u.find((e=>e.key===t.value)):s}),[e,u,s]),y=(0,l.useCallback)((l=>{let n;n=l?He(e,D.F.AccountID,{value:String(l),type:Ee.w}):(0,Ie.Z)(e,D.F.AccountID),window.location.hash=Ge({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&u.length?l.createElement(l.Fragment,null,l.createElement(he.Z,{id:i,hasMenu:!0,isMenuOpen:o.isOpen,onPress:o.onToggle},p.title),l.createElement(Se.Z,{target:i,isOpen:o.isOpen,onMenuClose:o.onClose},u.map((e=>l.createElement(We.Z,{key:e.key,value:e.key,isSelected:p.key===e.key,onSelect:(0,xe.Z)(y,o.onClose)},e.title))))):null}var Be=r(70617),Qe=r(84389);const Je=(0,Be.Z)((function(e,t){return(0,H.P1)((0,Qe.Z)(e,t),(e=>e.filter((e=>{const t=e.type?A.getMetadataType(e.type):null;return t&&t.typeString!==A.PLAYLIST}))))}));function Ye({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n,i]=(0,a.c9)(),o=(0,Ae.Z)(),s=(0,Fe.Z)(),c=(0,m.v9)(Je(n.machineIdentifier,i.identifier)),u=(0,l.useMemo)((()=>({key:"all",title:(0,j.Z)("All Libraries")})),[]),p=(0,l.useMemo)((()=>c.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[u])),[c,u]),y=(0,l.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&p.length?p.find((e=>String(e.key)===t.value)):u}),[e,p,u]),d=(0,l.useCallback)((l=>{let n;n="all"!==l?He(e,D.F.LibrarySectionID,{value:l,type:Ee.w}):(0,Ie.Z)(e,D.F.LibrarySectionID),window.location.hash=Ge({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return y&&c.length?l.createElement(l.Fragment,null,l.createElement(he.Z,{id:o,hasMenu:!0,isMenuOpen:s.isOpen,onPress:s.onToggle},y.title),l.createElement(Se.Z,{target:o,isOpen:s.isOpen,onMenuClose:s.onClose},p.map((e=>l.createElement(We.Z,{key:e.key,value:e.key,isSelected:y.key===e.key,onSelect:(0,xe.Z)(d,s.onClose)},e.title))))):null}var $e=r(47192);function et(){const[e]=(0,a.c9)(),t=(0,Ae.Z)(),r=(0,Fe.Z)(),n=(0,m.v9)($e.Z),i=(0,l.useMemo)((()=>n.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[n]),o=(0,l.useMemo)((()=>i.find((t=>t.key===e.machineIdentifier))),[e,i]),s=(0,l.useCallback)((e=>{window.location.hash=(0,we.Z)(e)}),[]);return o?l.createElement(l.Fragment,null,l.createElement(he.Z,{id:t,hasMenu:!0,isMenuOpen:r.isOpen,onPress:r.onToggle},o.title),l.createElement(Se.Z,{target:t,isOpen:r.isOpen,onMenuClose:r.onClose},i.map((e=>l.createElement(We.Z,{key:e.key,value:e.key,isSelected:o.key===e.key,onSelect:(0,xe.Z)(s,r.onClose)},e.title))))):null}function tt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const n=(0,Ae.Z)(),a=(0,Fe.Z)(),i=[G.XH.Week,G.XH.Month,G.XH.NinetyDays,G.XH.Year,G.XH.AllTime],o=(0,l.useCallback)((t=>{const l=He(e,D.F.ViewedAt,{value:String((0,G.xP)(t)),type:Ee.w});window.location.hash=Ge({filters:l,activeTimePeriod:t,sort:r})}),[e,r]);return l.createElement(l.Fragment,null,l.createElement(he.Z,{id:n,hasMenu:!0,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,G.dZ)(t)),l.createElement(Se.Z,{target:n,isOpen:a.isOpen,onMenuClose:a.onClose},i.map((e=>l.createElement(We.Z,{key:e,value:e,isSelected:t===e,onSelect:(0,xe.Z)(o,a.onClose)},(0,G.dZ)(e))))))}const rt=(0,H.P1)(re,(e=>e.totalSize));function lt({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:n}){const[i]=(0,a.c9)(),o=(0,m.v9)(rt),s=!C(e,D.F.MetadataItemID);return l.createElement(Pe.Z,null,l.createElement(Oe.Z,null,l.createElement(he.Z,{to:(0,we.Z)(i.machineIdentifier)},(0,j.Z)("Play History")),t?l.createElement(he.Z,null,t):null,s?l.createElement(et,null):null,s?l.createElement(l.Fragment,null,l.createElement(Ye,{activeFilters:e,activeTimePeriod:r,activeSort:n}),l.createElement(Ve,{activeFilters:e,activeTimePeriod:r,activeSort:n}),l.createElement(tt,{activeFilters:e,activeTimePeriod:r,activeSort:n})):null,l.createElement(ge.Z,null,o)))}var nt=r(70449),at=r(25369),it=r(76764),ot=r(5718),st=r(90317);function ct({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:n}){return l.createElement(at.Z,null,e.map((({style:e,title:a,ascKey:i,descKey:o,key:s})=>{if(!i)return l.createElement("div",{key:s,style:e,className:"PlayHistoryTableHeader-tableHeader-n2UFAk"},l.createElement(it.Z,null,l.createElement(st.Z,null,a())));const c=n===i||n===o,u=n===i;return l.createElement(ot.Z,{key:s,style:e,to:Ge({filters:t,activeTimePeriod:r,sort:u?o:i})},l.createElement(it.Z,{isActive:c},l.createElement(st.Z,null,a()),c?l.createElement(nt.Z,{isAscending:!u}):null))})))}function ut(){var e;const t=(0,m.I0)(),[r]=(0,a.c9)(),n=(0,i.Z)(),o=(0,p.Z)(n.filters),s=(0,c.Z)(n.filterTitle),u=null!=(e=(0,K.su)(G.XH).find((e=>e===(0,c.Z)(n.activeTimePeriod))))?e:G.XH.AllTime,d=n.sort?(0,c.Z)(n.sort):"viewedAt:desc",v=(0,q.Z)(n.isParentType),f=function(e,t){let r=[U,_,...z];return!t&&C(e,D.F.MetadataItemID)||(r=[X,...r]),C(e,D.F.LibrarySectionID)||C(e,D.F.MetadataItemID)||(r=[L,...r]),C(e,D.F.AccountID)||(r=[R,...r]),r}(o,v);return(0,E.Z)(),(0,l.useEffect)((()=>{t(w.Z.actions.populateRequested({server:r})),t(P.Z.actions.populateRequested({server:r}))}),[t,r]),(0,l.useEffect)((()=>((0,y.c9)((()=>{t(k.Z.actions.fetchRangeRequested({server:r,filters:o,sort:d,startIndex:0,size:100}))})),()=>{t(k.Z.actions.reset())})),[o,d,t,r]),l.createElement(I.Z,{scrollDirection:T.I.None},l.createElement(lt,{activeFilters:o,activeFilterTitle:s,activeTimePeriod:u,activeSort:d}),l.createElement(ct,{activeTableColumns:f,activeFilters:o,activeTimePeriod:u,activeSort:d}),l.createElement(Ze,{activeTableColumns:f,activeFilters:o,activeSort:d}))}function mt(){const{machineIdentifier:e,providerIdentifier:t}=(0,s.Z)(),r=(0,i.Z)();return l.createElement(a.ZP,{machineIdentifier:e,providerIdentifier:t},l.createElement(u.Z,{machineIdentifier:e,providerIdentifier:t},l.createElement(o.ZP,{metricsPage:n.mw,metricsContext:(0,c.Z)(r.context)},l.createElement(ut,null))))}},38770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});const l=function(e){return 1===Number(e)||"true"===e}},26253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var l=r(45697),n=r.n(l),a=r(67294),i=r(17845);function o(e){var t=e["aria-label"],r=e.className,l=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=l,n.className=i.Z.plexIcon+(r?" "+r:"");var o=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&o.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(o))}o.propTypes={"aria-label":n().string,className:n().string,style:n().object};const s=o},72373:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var l=r(45697),n=r.n(l),a=r(67294),i=r(17845);function o(e){var t=e["aria-label"],r=e.className,l=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=l,n.className=i.Z.plexIcon+(r?" "+r:"");var o=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&o.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(o))}o.propTypes={"aria-label":n().string,className:n().string,style:n().object};const s=o}}]);