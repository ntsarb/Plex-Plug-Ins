(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[927],{48927:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var o=n(37703),a=n(22222),r=n(99051),l=n(67294),s=n(69605),c=n(53790),i=n(39571),d=n(66102),u=n(50362),p=n(14699),m=n(58368),y=n(58858),b=n(18676),S=n(75774),f=n(45610),g=n(15378),M=n(84388),w=n(12986),O=n(46565),v=n(5562),E=n(58300),C=n(40691),Z=n(13202),h=Object.prototype.hasOwnProperty,D=Object.getOwnPropertySymbols,P=Object.prototype.propertyIsEnumerable,j=Object.assign;const k=function(e){const{errorMessage:t,isMediaSubscriptionSaving:n,prefGroups:o,className:a,onModalClose:r,onSubmit:s}=e,c=((e,t)=>{var n={};for(var o in e)h.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&D)for(var o of D(e))t.indexOf(o)<0&&P.call(e,o)&&(n[o]=e[o]);return n})(e,["errorMessage","isMediaSubscriptionSaving","prefGroups","className","onModalClose","onSubmit"]),i=(0,w.Z)(n)&&!n;return(0,l.useEffect)((()=>{i&&!t&&r()}),[t,i,r]),l.createElement(b.ZP,{className:a,onSubmit:s},l.createElement(M.Z,null,(0,v.Z)("Download Options")),t?l.createElement(C.Z,{errorMessage:t}):null,l.createElement(S.Z,null,l.createElement("div",{key:"advanced"},l.createElement(Z.Z,j(j({},c),{prefs:o.advanced})))),l.createElement(f.Z,null,l.createElement(g.Z,null,l.createElement(y.Z,{kind:O.TP,onPress:r},(0,v.Z)("Cancel")),l.createElement(E.Z,{type:"submit",isSpinning:n,kind:O._8},(0,v.Z)("Save")))))};var x=Object.prototype.hasOwnProperty,A=Object.getOwnPropertySymbols,K=Object.prototype.propertyIsEnumerable,I=Object.assign,_=(e,t)=>{var n={};for(var o in e)x.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&A)for(var o of A(e))t.indexOf(o)<0&&K.call(e,o)&&(n[o]=e[o]);return n};const N=new Set(["autoDeletionItemPolicyUnwatchedLibrary","autoDeletionItemPolicyWatchedLibrary"]),T={dispatchSyncDownloadModalChangeTemplateMode:r.Jl,dispatchSyncDownloadSaveSubscription:r.Y1},G=(0,o.$j)((function(){return(0,a.P1)(((e,{modal:t})=>t),(0,p.Z)(),(0,a.P1)((e=>e.downloads.states),((e,{modal:t})=>t),((e,t)=>{const{sourceAttr:n,ratingKey:o}=t;return e.some((e=>e.ratingKey===o&&e.sourceAttr===n&&"saving"===e.state))})),u.Z,((e,t,n,o)=>{const{hint:a}=t,r=t.target&&o[t.target.metadata],l=(0,m.Z)(t.prefs,N);return{errorMessage:e.error,hint:a,isMediaSubscriptionSaving:n,prefGroups:l,target:r}}))}),T)((function(e){const{dispatchSyncDownloadModalChangeTemplateMode:t,dispatchSyncDownloadSaveSubscription:n,modal:o}=e,a=_(e,["dispatchSyncDownloadModalChangeTemplateMode","dispatchSyncDownloadSaveSubscription","modal"]),{ratingKey:r,sourceAttr:s}=o,c=(0,l.useCallback)((e=>{const{mode:t}=e,o=_(e,["mode"]);n({prefs:o,ratingKey:r,sourceAttr:s})}),[r,s,n]);return l.createElement(k,I(I({},a),{onSubmit:c}))})),L=function(e){const{isOpen:t,modal:n,onSyncDownloadModalClose:o}=e,{error:a,mediaSubscription:r,ratingKey:u,sourceAttr:p}=n,m=(0,l.useCallback)((()=>{o({ratingKey:u,sourceAttr:p})}),[u,p,o]);return l.createElement(c.Z,{isOpen:t,metricsPage:s.B8,onModalClose:m},a&&!r?l.createElement(d.Z,{message:a,onModalClose:m}):l.createElement(i.Z,{onModalClose:m},l.createElement(G,{className:"SyncDownloadModal-formContent-2qUtoR ModalContent-modalContent-rkHSzL",modal:n,mediaSubscriptionEntityID:r,onModalClose:m})))};var U=Object.assign;const $=(0,a.P1)((function(e){return e.ui.syncDownloadModals}),(e=>({modal:e.find((e=>e.isOpen))}))),q={onSyncDownloadModalClose:r.yr},z=(0,o.$j)($,q)((function(e){return e.modal?l.createElement(L,U(U({},e),{isOpen:!0})):null}))}}]);