(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[548],{33997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),s=r(4524),i=r(72194),o=r(59468);const a=(0,i.Z)(o.Z,(({homeSettings:e})=>e)),c=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},1292:(e,t,r)=>{"use strict";function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{Z:()=>n})},82947:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5562);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.Z)("Needs Update"):t.relay?(0,n.Z)("Indirect"):t.isPrivate?(0,n.Z)("Nearby"):(0,n.Z)("Remote"):e.isRelayed?r=(0,n.Z)("Indirect"):e.isUnavailable?r=(0,n.Z)("Unavailable"):e.isUnauthorized?r=(0,n.Z)("Unauthorized"):(s=!0,r=(0,n.Z)("Connecting")),{isConnecting:s,status:r}}},28548:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>et});var n=r(67294),s=r(94114),i=r(65669),o=r(89969),a=r(22222),c=r(96516),l=r(61254);const p=(0,c.Z)((0,a.P1)(l.Z,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var m=r(72668),d=r(43666),f=r(27082),h=r(45428),S=r(58801),v=r(3704),y=r(12319),P=r(98727),b=r(74816),E=r(2375),I=r(33997),x=r(59468),N=r(46202),g=r(3386),Z=r(5562),C=r(37084),O=r(20723),B=r(9119),k=r(43478),R=Object.defineProperty,T=Object.prototype.hasOwnProperty,w=Object.getOwnPropertySymbols,j=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&F(e,r,t[r]);if(w)for(var r of w(t))j.call(t,r)&&F(e,r,t[r]);return e};class _ extends n.Component{constructor(e,t){super(e,t),this.onChange=e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=D({},t);r.forEach((t=>{const r=n[t];n[t]=D(D({},r),{value:e})})),this.store.dispatch(C.Nw.replaceState(n))},this.onFormStoreChange=()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})},this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)T.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&j.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(O.Z,D(D({},s),{value:this.state.value,onChange:(0,B.Z)(this.onChange,r)})):null}}_.contextTypes={formStore:k.Z};const A=_;function U(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(h.Z,{className:i},c))}U.defaultProps={className:"FirstRunExperienceActionsContainer-container-1h1Z7A",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-1hp1JG",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-1n1Ryg",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-33vKc- Scroller-vertical-3IY07c"};const M=U;var z=r(39670),H=r(22745),G=r(6103),K=r(60528);const $="FirstRunExperienceStep-stepButton-XQ-EW4";var L=Object.defineProperty,V=Object.prototype.hasOwnProperty,W=Object.getOwnPropertySymbols,Y=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,J=(e,t)=>{for(var r in t||(t={}))V.call(t,r)&&q(e,r,t[r]);if(W)for(var r of W(t))Y.call(t,r)&&q(e,r,t[r]);return e},X=(e,t)=>{var r={};for(var n in e)V.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&W)for(var n of W(e))t.indexOf(n)<0&&Y.call(e,n)&&(r[n]=e[n]);return r};function Q(e){const{step:t,isActive:r,onPress:s}=e;return n.createElement(G.Z,{className:r?"FirstRunExperienceStep-activeStepIcon-3cbK57 FirstRunExperienceStep-stepIcon-1ki49w":"FirstRunExperienceStep-stepIcon-1ki49w",onPress:function(){s(t)}},t)}function ee(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:m,component:d,onButtonBackPress:f,onButtonNextPress:h,onStepPress:S}=t,v=X(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),y=z.Z.prop("X-Plex-Product");return n.createElement(d,J({className:r},v),n.createElement("div",{className:s},m),n.createElement("div",{className:i},n.createElement("div",{className:"FirstRunExperienceStep-stepText-lK0KRL"},(0,Z.Z)("{productName} Setup",{productName:y}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(Q,{key:e,step:e,isActive:a===e,onPress:S})))),n.createElement("h3",{className:"FirstRunExperienceStep-stepHeading-3sBxXP"},c),n.createElement("p",{className:"FirstRunExperienceStep-stepBody-2NcbW1"},l),p?n.createElement(H.Z,{className:$,onPress:f},p):null,n.createElement(H.Z,{className:$,kind:K._8,type:"submit",onPress:h},u)))}ee.defaultProps={className:"FirstRunExperienceStep-container-1Yi9mw",actionsClassName:"FirstRunExperienceStep-actions-YLgeAL",stepContainerClassName:"FirstRunExperienceStep-stepContainer-2R-hBc",component:function(e){var t=e,{children:r}=t,s=X(t,["children"]);return n.createElement("div",J({},s),r)},steps:2,step:1};const te=ee;var re=r(51221),ne=r(19578);var se=Object.defineProperty,ie=Object.prototype.hasOwnProperty,oe=Object.getOwnPropertySymbols,ae=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const le=(0,re.Z)((function(e){const t=e,{title:r,sourceType:s,directoryIcon:i}=t,o=((e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oe)for(var n of oe(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r})(t,["title","sourceType","directoryIcon"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-rJaNVf",htmlFor:o.name},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-2w_9FK"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-3HnVhs"},i?n.createElement("img",{className:"SelectSourceItemInput-iconImg-1iktdK SourceSidebarItem-iconImg-3JkcZ2",src:i}):n.createElement(ne.Z,{sourceType:s})),r),n.createElement(O.Z,((e,t)=>{for(var r in t||(t={}))ie.call(t,r)&&ce(e,r,t[r]);if(oe)for(var r of oe(t))ae.call(t,r)&&ce(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-ba7GNp CheckInput-input-3u8_kT"},o)))})),pe=function(e){const{isPending:t,steps:r,sources:s,onSubmit:i,onButtonBackPress:o,onStepPress:a}=e;return t?n.createElement(S.Z,null):n.createElement(te,{stepHeadingText:(0,Z.Z)("Customize your Media"),stepBodyText:(0,Z.Z)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,Z.Z)("Go Back"):void 0,stepButtonNextText:(0,Z.Z)("Finish Setup"),step:2,steps:r,component:C.ZP,onSubmit:i,onButtonBackPress:o,onStepPress:a},n.createElement(M,{title:(0,Z.Z)("Pinned Sources"),rightTitle:s.length?n.createElement(A,{inputClassName:"SelectNavigationStep-input-38xD42 CheckInput-input-3u8_kT",name:"allSources",names:s.map((e=>e.key))}):null},s.map((e=>n.createElement(le,{key:e.key,name:e.key,title:e.title,sourceType:e.sourceType,directoryIcon:e.directoryIcon,initialValue:!0})))))};var ue=Object.defineProperty,me=Object.prototype.hasOwnProperty,de=Object.getOwnPropertySymbols,fe=Object.prototype.propertyIsEnumerable,he=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))me.call(t,r)&&he(e,r,t[r]);if(de)for(var r of de(t))fe.call(t,r)&&he(e,r,t[r]);return e};const ve=(0,a.P1)(I.Z,P.Z,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),ye=(0,a.P1)(b.Z,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function Pe(e,t){return t.reduce(((t,r)=>{const n=(0,g.Z)(r),s=(0,N.Z)({sourceServer:e,sourceProvider:r,directories:n&&n.directories});return t.push(...s),t}),[])}const be={dispatchSetupSources:d.E8};class Ee extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})}}componentDidUpdate(){this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&de)for(var n of de(e))t.indexOf(n)<0&&fe.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(pe,Se(Se({sources:r,isPending:t||0===r.length},o),{onSubmit:this.onSubmit}))}}const Ie=(0,o.$j)((function(){return(0,a.P1)(I.Z,ve,E.Z,ye,x.Z,((e,t,r,n,s)=>{const i=Pe(e,t),o=Pe(r,n),{sidebarSettings:{hasCompletedSetup:a}}=s;return{isPending:!(!e||e.connectionTestResult!==y._r.PENDING),sources:[...i,...o],hasCompletedSetup:a}}))}),be)(Ee);var xe=r(45697),Ne=r.n(xe),ge=r(50602),Ze=r(74995),Ce=r(94184),Oe=r.n(Ce),Be=r(30492),ke=r(1292),Re=r(82947),Te=r(41324),we=r(35771);var je=Object.defineProperty,Fe=Object.prototype.hasOwnProperty,De=Object.getOwnPropertySymbols,_e=Object.prototype.propertyIsEnumerable,Ae=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&Ae(e,r,t[r]);if(De)for(var r of De(t))_e.call(t,r)&&Ae(e,r,t[r]);return e};const Me=(0,o.$j)((function(){return(0,ge.Z)((0,Ze.Z)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,ke.Z)((0,Be.Z)(e),(0,Re.Z)(e).status);return n.createElement(G.Z,{className:Oe()("SelectPreferredServerItem-serverButton-2Mrsw0",t&&"SelectPreferredServerItem-isSelected-2AqAL7",r&&"SelectPreferredServerItem-isUnavailable-6GBm_E"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-1u39P-"},n.createElement("span",{className:"SelectPreferredServerItem-title-25u5_u"},(0,Te.Z)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-y-SjkL"},i)),t?n.createElement(we.Z,{className:"SelectPreferredServerItem-serverMenuIcon-zkCVdP","aria-label":(0,Z.Z)("Selected")}):null)}));Me.propTypes=Ue(Ue({},Me.propTypes),{machineIdentifier:Ne().string.isRequired,serverEntityID:Ne().string.isRequired});const ze=Me,He=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(te,{stepHeadingText:(0,Z.Z)("Choose your Preferred Server"),stepBodyText:(0,Z.Z)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,Z.Z)("Continue"),step:1,onButtonNextPress:i,onStepPress:o},n.createElement(M,{title:(0,Z.Z)("Plex Media Servers")},r.map((e=>n.createElement(ze,{key:e.entityID,serverEntityID:e.entityID,machineIdentifier:e.machineIdentifier,isSelected:t&&t.machineIdentifier===e.machineIdentifier,onPress:s})))))};var Ge=Object.defineProperty,Ke=Object.prototype.hasOwnProperty,$e=Object.getOwnPropertySymbols,Le=Object.prototype.propertyIsEnumerable,Ve=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Ke.call(t,r)&&Ve(e,r,t[r]);if($e)for(var r of $e(t))Le.call(t,r)&&Ve(e,r,t[r]);return e};function Ye(e,t){return!e&&t.length>0}class qe extends n.Component{constructor(e,t){super(e,t),this.onNextStepPress=()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))},this.onBackStepPress=()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))},this.onStepPress=e=>{this.setState({step:e})},this.onEndFirstRunExperience=()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})},this.state={step:1}}componentDidMount(){(0,f.c9)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(We(We({},this.props),{preferredServerIdentifiers:null}))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),Ye(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||Ye(t,r)?n.createElement(v.Z,null,n.createElement(S.Z,null)):n.createElement(h.Z,{className:"FirstRunExperiencePage-container-1yH8CD"},1!==i||o?n.createElement(Ie,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onStepPress:this.onStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience}):n.createElement(He,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onStepPress:this.onStepPress,onSavePreferredServer:s}))}}const Je=qe,Xe={onSavePreferredServer:d.p7,onEndFirstRunExperience:d.G_,onResetCustomization:d.Dy},Qe=(0,o.$j)((function(){return(0,a.P1)(m.Z,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),Xe)(Je);function et(){return n.createElement("div",{className:s.u},n.createElement(i.Z,null,n.createElement(Qe,null)))}}}]);