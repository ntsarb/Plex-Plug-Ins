"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[334],{47752:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(22222),s=r(9922),i=r(17939),o=r(235);const a=(0,i.Z)(o.Z,(({homeSettings:e})=>e)),c=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},58490:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{Z:()=>n})},19824:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(73788);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.Z)("Needs Update"):t.relay?(0,n.Z)("Indirect"):t.isPrivate?(0,n.Z)("Nearby"):(0,n.Z)("Remote"):e.isRelayed?r=(0,n.Z)("Indirect"):e.isUnavailable?r=(0,n.Z)("Unavailable"):e.isUnauthorized?r=(0,n.Z)("Unauthorized"):(s=!0,r=(0,n.Z)("Connecting")),{isConnecting:s,status:r}}},38334:(e,t,r)=>{r.r(t),r.d(t,{default:()=>et});var n=r(67294),s=r(33415),i=r(92450),o=r(28216),a=r(22222),c=r(87242),l=r(97075);const p=(0,c.Z)((0,a.P1)(l.Z,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(92656),m=r(77054),f=r(87442),v=r(8067),h=r(42985),S=r(63776),y=r(86022),P=r(46898),b=r(77353),E=r(74278),I=r(47752),x=r(235),g=r(97946),N=r(78741),Z=r(73788),C=r(70668),O=r(70852),B=r(14580),k=r(60952),T=Object.defineProperty,R=Object.prototype.hasOwnProperty,j=Object.getOwnPropertySymbols,F=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&w(e,r,t[r]);if(j)for(var r of j(t))F.call(t,r)&&w(e,r,t[r]);return e};class U extends n.Component{constructor(e,t){super(e,t),this.onChange=e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=D({},t);r.forEach((t=>{const r=n[t];n[t]=D(D({},r),{value:e})})),this.store.dispatch(C.Nw.replaceState(n))},this.onFormStoreChange=()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})},this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)R.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))t.indexOf(n)<0&&F.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(O.Z,D(D({},s),{value:this.state.value,onChange:(0,B.Z)(this.onChange,r)})):null}}U.contextTypes={formStore:k.Z};const A=U;function _(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(v.Z,{className:i},c))}_.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const H=_;var M=r(65935),z=r(18222),W=r(85448),$=r(25555);const K="FirstRunExperienceStep-stepButton-yDEnXT";var V=Object.defineProperty,X=Object.prototype.hasOwnProperty,q=Object.getOwnPropertySymbols,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,G=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Y(e,r,t[r]);if(q)for(var r of q(t))Q.call(t,r)&&Y(e,r,t[r]);return e},J=(e,t)=>{var r={};for(var n in e)X.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&q)for(var n of q(e))t.indexOf(n)<0&&Q.call(e,n)&&(r[n]=e[n]);return r};function L(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(W.Z,{className:r?"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA":"FirstRunExperienceStep-stepIcon-Nw5HXA",onPress:i},t)}function ee(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:f,onButtonNextPress:v,onStepPress:h}=t,S=J(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),y=M.Z.prop("X-Plex-Product");return n.createElement(m,G({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:"FirstRunExperienceStep-stepText-NTZbsm"},(0,Z.Z)("{productName} Setup",{productName:y}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(L,{key:e,isActive:a===e,step:e,onPress:h})))),n.createElement("h3",{className:"FirstRunExperienceStep-stepHeading-J6noxn"},c),n.createElement("p",{className:"FirstRunExperienceStep-stepBody-gJiLmC"},l),p?n.createElement(z.Z,{className:K,onPress:f},p):null,n.createElement(z.Z,{className:K,kind:$._8,type:"submit",onPress:v},u)))}ee.defaultProps={className:"FirstRunExperienceStep-container-CS60ox",actionsClassName:"FirstRunExperienceStep-actions-gY3hXF",stepContainerClassName:"FirstRunExperienceStep-stepContainer-wQawUg",component:function(e){var t=e,{children:r}=t,s=J(t,["children"]);return n.createElement("div",G({},s),r)},steps:2,step:1};const te=ee;var re=r(58851),ne=r(77483);var se=Object.defineProperty,ie=Object.prototype.hasOwnProperty,oe=Object.getOwnPropertySymbols,ae=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const le=(0,re.Z)((function(e){const t=e,{title:r,sourceType:s,providerIdentifier:i}=t,o=((e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oe)for(var n of oe(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r})(t,["title","sourceType","providerIdentifier"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:o.name},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(ne.Z,{providerIdentifier:i,sourceType:s})),r),n.createElement(O.Z,((e,t)=>{for(var r in t||(t={}))ie.call(t,r)&&ce(e,r,t[r]);if(oe)for(var r of oe(t))ae.call(t,r)&&ce(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF"},o)))})),pe=function(e){const{isPending:t,steps:r,sources:s,onSubmit:i,onButtonBackPress:o,onStepPress:a}=e;return t?n.createElement(h.Z,null):n.createElement(te,{component:C.ZP,step:2,stepBodyText:(0,Z.Z)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,Z.Z)("Go Back"):void 0,stepButtonNextText:(0,Z.Z)("Finish Setup"),stepHeadingText:(0,Z.Z)("Customize your Media"),steps:r,onButtonBackPress:o,onStepPress:a,onSubmit:i},n.createElement(H,{rightTitle:s.length?n.createElement(A,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,Z.Z)("Pinned Sources")},s.map((e=>n.createElement(le,{key:e.key,initialValue:!0,name:e.key,providerIdentifier:e.providerIdentifier,sourceType:e.sourceType,title:e.title})))))};var ue=Object.defineProperty,de=Object.prototype.hasOwnProperty,me=Object.getOwnPropertySymbols,fe=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))de.call(t,r)&&ve(e,r,t[r]);if(me)for(var r of me(t))fe.call(t,r)&&ve(e,r,t[r]);return e};const Se=(0,a.P1)(I.Z,P.Z,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),ye=(0,a.P1)(b.Z,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function Pe(e,t){return t.reduce(((t,r)=>{const n=(0,N.Z)(r),s=(0,g.Z)({sourceServer:e,sourceProvider:r,directories:n&&n.directories});return t.push(...s),t}),[])}const be={dispatchSetupSources:m.E8};class Ee extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})}}componentDidUpdate(){this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)de.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&me)for(var n of me(e))t.indexOf(n)<0&&fe.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(pe,he(he({isPending:t||0===r.length,sources:r},o),{onSubmit:this.onSubmit}))}}const Ie=(0,o.$j)((function(){return(0,a.P1)(I.Z,Se,E.Z,ye,x.Z,((e,t,r,n,s)=>{const i=Pe(e,t),o=Pe(r,n),{sidebarSettings:{hasCompletedSetup:a}}=s;return{isPending:!(!e||e.connectionTestResult!==y._r.PENDING),sources:[...i,...o],hasCompletedSetup:a}}))}),be)(Ee);var xe=r(45697),ge=r.n(xe),Ne=r(99735),Ze=r(87880),Ce=r(94184),Oe=r.n(Ce),Be=r(9709),ke=r(58490),Te=r(19824),Re=r(77713),je=r(14522);var Fe=Object.defineProperty,we=Object.prototype.hasOwnProperty,De=Object.getOwnPropertySymbols,Ue=Object.prototype.propertyIsEnumerable,Ae=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))we.call(t,r)&&Ae(e,r,t[r]);if(De)for(var r of De(t))Ue.call(t,r)&&Ae(e,r,t[r]);return e};const He=(0,o.$j)((function(){return(0,Ne.Z)((0,Ze.Z)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,ke.Z)((0,Be.Z)(e),(0,Te.Z)(e).status);return n.createElement(W.Z,{className:Oe()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,Re.Z)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(je.Z,{"aria-label":(0,Z.Z)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));He.propTypes=_e(_e({},He.propTypes),{machineIdentifier:ge().string.isRequired,serverEntityID:ge().string.isRequired});const Me=He,ze=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(te,{step:1,stepBodyText:(0,Z.Z)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,Z.Z)("Continue"),stepHeadingText:(0,Z.Z)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(H,{title:(0,Z.Z)("Plex Media Servers")},r.map((e=>n.createElement(Me,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var We=Object.defineProperty,$e=Object.prototype.hasOwnProperty,Ke=Object.getOwnPropertySymbols,Ve=Object.prototype.propertyIsEnumerable,Xe=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qe=(e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&Xe(e,r,t[r]);if(Ke)for(var r of Ke(t))Ve.call(t,r)&&Xe(e,r,t[r]);return e};function Qe(e,t){return!e&&t.length>0}class Ye extends n.Component{constructor(e,t){super(e,t),this.onNextStepPress=()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))},this.onBackStepPress=()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))},this.onStepPress=e=>{this.setState({step:e})},this.onEndFirstRunExperience=()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})},this.state={step:1}}componentDidMount(){(0,f.c9)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(qe(qe({},this.props),{preferredServerIdentifiers:null}))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),Qe(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||Qe(t,r)?n.createElement(S.Z,null,n.createElement(h.Z,null)):n.createElement(v.Z,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Ie,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(ze,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const Ge=Ye,Je={onSavePreferredServer:m.p7,onEndFirstRunExperience:m.G_,onResetCustomization:m.Dy},Le=(0,o.$j)((function(){return(0,a.P1)(d.Z,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),Je)(Ge);function et(){return n.createElement("div",{className:s.u},n.createElement(i.Z,null,n.createElement(Le,null)))}}}]);