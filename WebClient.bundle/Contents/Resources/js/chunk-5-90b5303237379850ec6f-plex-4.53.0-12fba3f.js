(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Bwla:function(e,t,a){e.exports={pageHeader:"DownloadsPageHeader-pageHeader-3M4Y7O PrimaryPageHeader-pageHeader-21UFe6 PageHeader-pageHeader-2KNPGd",storageTotal:"DownloadsPageHeader-storageTotal-_oPb7E"}},XrQs:function(e,t,a){e.exports={item:"DownloadSubscriptionSummaryCell-item-3LccjK MetadataSummaryCell-item-3B6Ccq",alternateItem:"DownloadSubscriptionSummaryCell-alternateItem-3FhvdI MetadataSummaryCell-alternateItem-3K1M60 MetadataSummaryCell-item-3B6Ccq",underlay:"DownloadSubscriptionSummaryCell-underlay-T8K_YD MetadataSummaryCell-underlay-3M2OQt",overlay:"DownloadSubscriptionSummaryCell-overlay-3OdUDd MetadataSummaryCell-overlay-1lk0o5",posterContainer:"DownloadSubscriptionSummaryCell-posterContainer-3UCnOt MetadataSummaryCell-posterContainer-1Vc-ob",summaryContainer:"DownloadSubscriptionSummaryCell-summaryContainer-3flDe9 MetadataSummaryCell-summaryContainer-6HJG5t",titleContainer:"DownloadSubscriptionSummaryCell-titleContainer--iYGM5 MetadataSummaryCell-titleContainer-p5H3cg",errorIcon:"DownloadSubscriptionSummaryCell-errorIcon-2puZMG",title:"DownloadSubscriptionSummaryCell-title-30Sa2P MetadataSummaryCell-title-3jmFb3",statusContainer:"DownloadSubscriptionSummaryCell-statusContainer-NGdJ5e",statusText:"DownloadSubscriptionSummaryCell-statusText-3NzPKW",actions:"DownloadSubscriptionSummaryCell-actions-1hIxvT MetadataSummaryCell-actions-1C9ShK",summary:"DownloadSubscriptionSummaryCell-summary-1khthH MetadataSummaryCell-summary-2xqysY",button:"DownloadSubscriptionSummaryCell-button-2T3QQW MetadataSummaryCell-button-zZgSeN"}},fAF6:function(e,t,a){e.exports={downloadsPageContent:"DownloadsPage-downloadsPageContent-OvEkbl PageContent-pageContent-16mK6G",upsell:"DownloadsPage-upsell-ZagPPv"}},jQGk:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return pa}));var n=a("q1tI"),o=a.n(n),s=a("j/8p"),r=a("EEaV"),i=a("nGgY"),l=a("baWb"),c=a("/MKj"),d=a("G4qV"),u=a("F/us"),p=a.n(u),m=a("0jfG"),b=a("5NB4"),y=a("A9O1"),g=a("iZkF"),v=a("zTsO"),h=a("PE3u"),S=a("2cfR"),w=a("EVdn"),P=a.n(w),E=a("ICb1"),f=a("0jae"),O=a("+X4A"),D=a("nvND"),j=a("U//L"),C=a("hFBU"),I=a("t2mA"),T=a("FGim"),x=a("FjJJ"),k=a("1Lwt"),N=a("b3RP");const M=Object(E.a)("ui/downloadsPage/initDownloadsPage"),A=Object(E.a)("ui/downloadsPage/resetDownloadsPage"),L=Object(E.a)("ui/downloadsPage/fetchProvidersWithStorage"),R=Object(E.a)("ui/downloadsPage/saveDownloadsParams");Object(j.a)({"ui/downloadsPage/initDownloadsPage"(e,t){},"ui/downloadsPage/resetDownloadsPage"(e,t){},"ui/downloadsPage/fetchProvidersWithStorage"(e,t,a){const n=function(e){return e.get("ui").get("downloadsPage")}(e),o=e.get("embeddedServer");Object(k.a)(()=>{n.set({isProvidersPending:!0,providersError:null})});const s=o.getXHROptions(O.default.join("/media/providers",{includeStorage:1}),{headers:{Accept:D.a.accept}});Object(f.a)("[Downloads] Updating offline file size"),P.a.ajax(s).then(e=>{o.get("providers").add(e,{parse:!0,merge:!0}),n.set({isProvidersPending:!1,isProvidersPopulated:!0})},e=>{n.set({isProvidersPending:!1,providersError:Object(N.a)(e)})})},"ui/downloadsPage/saveDownloadsParams"(e,t,a){const n=e.get("user").get("experienceSettings").get("savedPivotParams");a(Object(I.l)({savedPivotParams:{...n,downloads:t}}))},[C.g](e,t,a){const{activity:n}=t;(function(e,t){const a=e.get("embeddedServer");return!!a&&a.entityID()===t.serverEntityID})(e,t)&&n.type===x.d&&n.Response.status===T.a&&a(L())}});var W=a("vUK6");function H(){return Object(d.a)(e=>e.downloads.subscriptions,W.a,(e=[],t)=>e.map(e=>t[e]))}var B=a("66GW");const{ASCENDING:K,DESCENDING:q}=m.a.directions;var F=a("2pL0"),z=a("qNMu"),G=a("pQ98"),U=a("Nca4"),V=a("oMRm"),Q=a("9ZQ6"),Z=a("ZRqN"),X=a("bCk4"),J=a("F5AI"),$=a("nMEA"),Y=a("19qv"),_=a("17x9"),ee=a.n(_),te=a("xhK+"),ae=a.n(te);function ne(e){var t=e["aria-label"],a=e.className,n=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-downloads-560"};s["aria-hidden"]=!t,s.style=n,s.className=ae.a.plexIcon+(a?" "+a:"");var r=[o.a.createElement.apply(o.a,["path",{d:"m280 476c108.248 0 196-87.752 196-196 0-108.248-87.752-196-196-196-108.248 0-196 87.752-196 196 0 108.248 87.752 196 196 196m0 42c-131.444 0-238-106.556-238-238 0-131.444 106.556-238 238-238 131.444 0 238 106.556 238 238 0 131.444-106.556 238-238 238m0-112l112-112-89.6 0 0-140-44.8 0 0 140-89.6 0 112 112"}].concat([]))];return t&&r.unshift(o.a.createElement("title",null,t)),o.a.createElement.apply(o.a,["svg",s].concat(r))}ne.propTypes={"aria-label":ee.a.string,className:ee.a.string,style:ee.a.object};var oe=ne;function se(e){var t=e["aria-label"],a=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",id:"plex-icon-downloads-upsell-560"};s["aria-hidden"]=!t,s.style=n,s.className=ae.a.plexIcon+(a?" "+a:"");var r=[o.a.createElement.apply(o.a,["path",{d:"M35.335 26.667h-.667v-16A2.67 2.67 0 0 0 32.001 8h-24a2.67 2.67 0 0 0-2.667 2.667v16h-.667a.667.667 0 0 0-.667.667v2.667c0 1.103.897 2 2 2h28c1.103 0 2-.897 2-2v-2.667a.667.667 0 0 0-.667-.667h.002zm-28.666-16c0-.736.599-1.333 1.333-1.333h24c.735 0 1.333.597 1.333 1.333v16h-10a.667.667 0 0 0-.667.667v.667h-5.333v-.667a.667.667 0 0 0-.667-.667h-10v-16h.001zm28 19.333a.668.668 0 0 1-.667.667h-28A.668.668 0 0 1 5.335 30v-2h10.667v.667c0 .368.299.667.667.667h6.667a.667.667 0 0 0 .667-.667V28H34.67v2h-.001zm-2.668-5a.667.667 0 0 1-.667.667H8.667A.667.667 0 0 1 8 25V11.667c0-.368.299-.667.667-.667h22.667c.368 0 .667.299.667.667V25zm-1.333-.667v-12H9.335v12h21.333zm-8.878-5.805a.668.668 0 1 1 .945.944l-2.223 2.221a.684.684 0 0 1-.472.195.677.677 0 0 1-.472-.195l-2.223-2.221a.668.668 0 0 1 .943-.943l1.084 1.083v-3.945a.667.667 0 0 1 1.334 0v3.945l1.084-1.084z"}].concat([]))];return t&&r.unshift(o.a.createElement("title",null,t)),o.a.createElement.apply(o.a,["svg",s].concat(r))}se.propTypes={"aria-label":ee.a.string,className:ee.a.string,style:ee.a.object};var re=se,ie=a("hBzc"),le=a("fVRA"),ce=a("94tf"),de=a("IEMP"),ue=a("XgVp");const pe=parseInt(ue.a.downloadCellHeight,10);var me=Object(de.a)(pe,5),be=a("tCfm"),ye=a("deD6"),ge=a("haOg"),ve=a("sfIp"),he=a("2bcr"),Se=a("ebYq"),we=a("f2wi"),Pe=a("rXDx"),Ee=a("hhQi"),fe=a("PD/8"),Oe=a("j3oq");var De=function(e){return e===Pe.SHOW},je=a("OelS"),Ce=a("THzy"),Ie=a("okn6"),Te=a("1cGo"),xe=a("bb2l"),ke=a("Aslj"),Ne=a("cL9g"),Me=a("8vr4"),Ae=a("BW9E"),Le=a("M7+X"),Re=a("5mkL"),We=a("Kurw"),He=a("xHg7"),Be=a("kFs7"),Ke=a("2XH5");var qe=Object(c.b)((function(){return Object(d.a)((e,{isDisabled:t})=>t,Object(Ke.a)(),(e,t)=>({isDisabled:e||t}))}))(e=>{const{metadataItemEntityID:t,buttonComponent:a,dispatch:n,...s}=e;return o.a.createElement(a,{...s})}),Fe=a("XL8h");var ze=function(e){return Object(Fe.a)(e||0,e>=1e9?2:0)},Ge=a("LSig");var Ue=a("hFcZ"),Ve=a("NJuV"),Qe=a("e2hs"),Ze=a("3pzj"),Xe=a("w8TB"),Je=a("XrQs"),$e=a.n(Je);var Ye=function(e){const{cellIndex:t,grabError:a,imageHeight:s,imageUrl:r,imageWidth:i,mediaSubscription:l,metadataItemEntityID:c,providerEntityID:d,route:u,progress:p,completed:m,total:b,showStorageTotal:y,showCreatedAt:v,showEdit:h,serverEntityID:S,isDownloadPending:w,isDownloading:P,isRefreshing:E,onEditItem:f,onRetryItem:O,onDeleteItem:D}=e,j=Object(Ne.a)(e),[C,I]=Object(n.useState)(!1),T=Object(n.useCallback)(()=>{I(!0)},[]),x=Object(n.useCallback)(()=>{I(!1),D()},[D]),k=Object(n.useCallback)(()=>{I(!1)},[]),{hint:N,target:M}=l,{title:A,type:L,subtype:R}=N;let W,H;w?W=Object(B.default)("Waiting to download"):P&&(W=b>1?Object(B.default)("Downloading {completed} of {total}",{completed:m+1,total:b}):Object(B.default)("Downloading")),y?H=ze(l.storageTotal):v&&(H=Object(Me.a)(l.createdAt)),H=H?` ${Te.a} ${H}`:H;const K=!E&&a,q=function(e){const{parentTitle:t,grandparentTitle:a,type:n,subtype:o,index:s}=e,r=n===Pe.TRACK;let i;return n===Pe.SEASON?i=Object(Le.a)({seasonIndex:s,noLeadingZero:!0,useLongName:!0}):n===Pe.EPISODE||r&&o===we.PODCAST?i=a:r&&a&&t?i=`${a} ${Te.a} ${t}`:r&&a&&(i=a),i}(N);return o.a.createElement("div",{className:t%2?$e.a.alternateItem:$e.a.item,style:j.style},u?o.a.createElement(F.a,{className:$e.a.underlay,tabIndex:"0",to:u,"aria-label":A}):null,o.a.createElement("div",{className:$e.a.overlay},o.a.createElement("div",{className:$e.a.posterContainer},j.isPlaceholder?o.a.createElement(Be.a,{imageWidth:i,imageHeight:s}):o.a.createElement(He.a,{metadataKey:l.hint.source,metadataItemEntityID:c,serverEntityID:S,providerEntityID:d,route:u,showOverlay:!!M,showLink:!1,showSelect:!1,showEdit:!1,showMore:!1,title:A,type:L,subtype:R,imageWidth:i,imageHeight:s,imageUrl:r,isOffscreen:!1})),o.a.createElement("div",{className:$e.a.summaryContainer},o.a.createElement("div",{className:$e.a.titleContainer},o.a.createElement("div",{className:$e.a.title},function(e){const{title:t,parentTitle:a,grandparentTitle:n,type:o,index:s,parentIndex:r,originallyAvailableAt:i}=e;let l=n||a||t;if(o===Pe.EPISODE){l=`${Object(Ae.a)({episodeIndex:s,seasonIndex:r,date:i,noLeadingZero:!0,separator:" Â· "})} ${Te.a} ${t}`}else o===Pe.TRACK&&(l=t);return l}(N))),o.a.createElement("div",{className:$e.a.summary},q?o.a.createElement("div",null,q):null,K?o.a.createElement("div",null,o.a.createElement(Ve.a,{className:$e.a.errorIcon}),a):o.a.createElement("div",null,function(e){const{guid:t,subtype:a,type:n}=e,{MOVIE:o,SHOW:s,SEASON:r,EPISODE:i,TRACK:l}=Pe,{PODCAST:c,WEBSHOW:d}=we;return n===s&&a===c?Object(B.default)("Podcast"):n===l&&a===c?Object(B.default)("Podcast Episode"):n===s&&a===d?Object(B.default)("Web Show"):n===i&&a===d?Object(B.default)("Web Show Episode"):n===o&&t.includes(Ge.d)?Object(B.default)("Video"):n===r?Object(B.default)("TV Show Season"):n===i?Object(B.default)("TV Show Episode"):Pe.getMetadataType(n).title}(N),H))),w||P?o.a.createElement("div",{className:$e.a.statusContainer},o.a.createElement("div",{className:$e.a.statusText},W),o.a.createElement(Re.a,{lineWidth:2,progress:p,showProgressText:!1,showIndeterminate:w,size:20,strokeColor:Ue.a.selectedColor,trackColor:Ue.a.defaultLinkDisabledLinkColor})):null,o.a.createElement("div",{className:$e.a.actions},K?o.a.createElement(ke.a,{component:xe.a,className:$e.a.button,tooltip:Object(B.default)("Retry"),ariaLabel:Object(B.default)("Retry {title}",{title:A}),iconComponent:Ze.a,onPress:O}):null,h?o.a.createElement(ke.a,{component:xe.a,className:$e.a.button,tooltip:Object(B.default)("Edit"),ariaLabel:Object(B.default)("Edit download details for {title}",{title:A}),iconComponent:Qe.a,onPress:f}):null,o.a.createElement(qe,{metadataItemEntityID:c,buttonComponent:ke.a,component:xe.a,"data-qa-id":"downloadSubscriptionRemoveButton",className:$e.a.button,tooltip:Object(B.default)("Delete"),ariaLabel:Object(B.default)("Delete {title}",{title:A}),iconComponent:Xe.a,kind:z.a,onPress:T}),o.a.createElement(We.a,{isOpen:C,metricsPage:g.x,title:Object(B.default)("Delete Download"),message:Object(B.default)("Are you sure you want to delete this download?"),onConfirm:x,onCancel:k}))))};const _e=Object(d.a)(Oe.a,e=>Object(he.a)(e));const et=Object(d.a)(Oe.a,ge.a,(e,t)=>e&&e.providers.map(e=>t[e]));const tt=new RegExp("createdAt"),at=new RegExp("storageTotal");const nt=Object(c.b)((function(){return Object(d.a)((e,{activeSort:t})=>t,(e,{listContext:t})=>t,_e,Object(be.a)(Object(d.a)(Object(Se.a)(),et,(e,t)=>{const{source:a}=e.hint,n=t.find(e=>e.source===a);return Object(ve.a)(n)}),e=>e),Object(Se.a)(),Object(d.a)(ye.a,Object(Se.a)(),(e,t)=>t.target?e[t.target.metadata]:null),(e=x.p,Object(d.a)(Object(Se.a)(),Object(fe.a)(e),(e,t)=>t.find(({Context:t})=>t.subscriptionID===e.key))),(e,t,a,n,o,s,r)=>{const{grabOperations:i,hint:l}=o,{subtype:c,type:d}=l,u=function(e,t,a){const{type:n,subtype:o}=e,s=Object(je.a)(n,o,t);return Object(Ce.a)(s,null,n,o,a||{},t)}(l,t,s),p=d!==Pe.TRACK||c===we.PODCAST,m=s&&p?Object(Ie.a)(a,n,s.key,void 0,s.playlistType):void 0,b=i&&i.find(e=>e.status===T.b);return{grabError:b&&(b.error||Object(B.default)("An unexpected error occurred")),isRefreshing:!!r,isDownloadPending:!s&&!!r&&null==r.Context.completed,isDownloading:!!r&&null!=r.Context.total&&null!=r.progress,mediaSubscription:o,imageWidth:u.width,imageHeight:u.height,imageUrl:u.url,metadataItemEntityID:s?s.entityID:null,providerEntityID:n.entityID,route:m,progress:r?r.progress:null,completed:r?r.Context.completed:null,total:r?r.Context.total:null,showEdit:De(d),showCreatedAt:tt.test(e),showStorageTotal:!!s&&at.test(e)}});var e}),(function(e,t){const{mediaSubscriptionEntityID:a,metricsPage:n,metricsProperties:o}=t,s={mediaSubscriptionEntityID:a,metricsPage:n,metricsProperties:o};return{onEditItem(){e(Object(Ee.d)(s))},onDeleteItem(){e(Object(S.c)(s))},onRetryItem(){e(Object(S.e)(s))}}}))(Ye);nt.propTypes={...nt.propTypes,mediaSubscriptionEntityID:ee.a.string.isRequired,metricsPage:ee.a.string.isRequired,metricsProperties:ee.a.object.isRequired};var ot=nt,st=a("rKBF"),rt=a.n(st);var it=function(e){const{activeSort:t,metricsPage:a,metricsProperties:s,serverEntityID:r,...i}=e,l=Object(n.useMemo)(()=>e=>o.a.createElement(ot,{...e,serverEntityID:r,activeSort:t,listType:ce.g,listContext:le.d,metricsPage:a,metricsProperties:s}),[t,a,s,r]);return o.a.createElement(ie.a,{...i,className:rt.a.content,scrollerClassName:rt.a.scroller,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",keyPropName:"mediaSubscriptionEntityID",layout:me,cellRenderer:l})},lt=a("Vk9Z");let ct,dt;function ut(e,t=window.location.hash){const a=function(e){if(ct===e)return dt;const t=e.split("?"),a=t.length>1?t[1]:void 0,n=a?O.default.parseParams(a):{};return ct=e,dt={url:t[0],params:n},dt}(t);return O.default.join(a.url,{...a.params,type:e.type,subtype:e.subtype,sort:e.sort,save:1})}function pt(e,t,a){return t?function(e,t){switch(e){case we.PODCAST:return t?Object(B.default)("Podcasts"):Object(B.default)("Podcast");case we.WEBSHOW:return t?Object(B.default)("Web Shows"):Object(B.default)("Web Show")}}(t,a):e?function(e,t){const a=Pe.getMetadataType(e);return t?a.plural:a.title}(e,a):Object(B.default)("All")}function mt({type:e,subtype:t,sort:a}){const n={save:1};return e&&(n.type=e),t&&(n.subtype=t),a&&(n.sort=a),{type:e,subtype:t,title:pt(e,t,!0),route:ut(n)}}var bt=a("q8w4"),yt=a("wsmf"),gt=a("mi1+"),vt=a("2C4C"),ht=a("La1S"),St=a("ssI9"),wt=a("HPXQ"),Pt=a("Zpbf"),Et=a("2Am/"),ft=a("2E08");const{ASCENDING:Ot,DESCENDING:Dt}=m.a.directions;var jt=function(e){const{activeType:t,activeSubtype:a,activeSort:n,sorts:s,selectedSort:r,onMenuClose:i,...l}=e;return o.a.createElement(wt.a,{...l,onMenuClose:i},s.map(({key:e,descKey:s,defaultDirection:l,title:c})=>{const d=r.key===e;let u=l;d&&(u=n?n===s?Ot:Dt:l===Ot?Dt:Ot);const p=u===Dt;return o.a.createElement(Pt.a,{key:e,to:ut({type:t,subtype:a,sort:p?s:e}),isSelected:d,iconComponent:p?Et.a:ft.a,selectedIconAriaLabel:p?Object(B.default)("Ascending"):Object(B.default)("Descending"),onPress:i},c)}))};var Ct=function(e){const{activeType:t,activeSubtype:a,types:n,onMenuClose:s,...r}=e;return o.a.createElement(wt.a,{...r,onMenuClose:s},n.map(({type:e,subtype:n,title:r,route:i})=>{let l;return l=n?n===a:e?e===t&&!a:!t&&!a,o.a.createElement(Pt.a,{key:n||e||"all",to:i,isSelected:l,onMenuClose:s},r)}))},It=a("jLMb"),Tt=a("ihSJ"),xt=a("2fhx"),kt=a("EiC7"),Nt=a("sBwU"),Mt=a("4+Le"),At=a("0pZA");function Lt(e){var t=e["aria-label"],a=e.className,n=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};s["aria-hidden"]=!t,s.style=n,s.className=ae.a.plexIcon+(a?" "+a:"");var r=[o.a.createElement.apply(o.a,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&r.unshift(o.a.createElement("title",null,t)),o.a.createElement.apply(o.a,["svg",s].concat(r))}Lt.propTypes={"aria-label":ee.a.string,className:ee.a.string,style:ee.a.object};var Rt=Lt,Wt=a("uEko"),Ht=a.n(Wt);const Bt=2*Object(kt.a)(At.a.slowSpeed);var Kt=function(e){const{isProcessingSubscriptions:t,onPress:a,...n}=e,s=Object(Mt.a)(t,!0,Bt)||t;return o.a.createElement(xt.a,{...n,tooltip:Object(B.default)("Check for new downloads"),tooltipAttachment:Nt.c,"data-qa-id":"toolbarProcessSubscriptions",isDisabled:t,onPress:s?null:a},s?o.a.createElement(Tt.a,{className:Ht.a.spinner}):o.a.createElement(Rt,{className:Ht.a.icon}))};var qt=function(e){const{className:t,canShowProcessSubscriptions:a,isProcessingSubscriptions:n,onRefreshDownloads:s}=e;return o.a.createElement("div",{className:t},a?o.a.createElement(Kt,{isProcessingSubscriptions:n,onPress:s}):null)};const Ft={onRefreshDownloads:S.d};var zt=Object(c.b)((function(){return Object(d.a)(H(),Object(It.d)(x.o),(e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t}))}),Ft)(qt),Gt=a("Bwla"),Ut=a.n(Gt);var Vt=function(e){const{serverEntityID:t,activeType:a,activeSubtype:s,activeSort:r,selectedSort:i,downloadTypes:l,storageTotal:c,sorts:d,size:u}=e,p=Object(vt.a)(),m=Object(vt.a)(),[b,y]=Object(n.useState)(c),[g,v]=Object(n.useState)(!1),[h,S]=Object(n.useState)(!1),w=Object(n.useCallback)(()=>{v(!g)},[g]),P=Object(n.useCallback)(()=>{v(!1)},[]),E=Object(n.useCallback)(()=>{S(!h)},[h]),f=Object(n.useCallback)(()=>{S(!1)},[]);Object(n.useEffect)(()=>{let e=window.setTimeout(()=>{y(c)},100);return()=>{e=window.clearTimeout(e)}},[c]);const O=a||s?Object(B.default)("All {typeTitle} Downloads",{typeTitle:pt(a,s,!1)}):Object(B.default)("All Downloads");return o.a.createElement(ht.a,{className:Ut.a.pageHeader},o.a.createElement(gt.a,null,o.a.createElement(yt.a,{id:p,"data-qa-id":"downloadsTypesMenuButton",hasMenu:l.length>2,isMenuOpen:g,onPress:w},O),o.a.createElement(Ct,{target:p,isOpen:g,activeType:a,activeSubtype:s,types:l,onMenuClose:P}),u>1?o.a.createElement(yt.a,{id:m,"data-qa-id":"downloadsSortsMenuButton",hasMenu:!0,isMenuOpen:h,onPress:E},Object(B.default)("By {sortTitle}",{sortTitle:i.title})):null,u>1?o.a.createElement(jt,{target:m,isOpen:h,activeType:a,activeSubtype:s,activeSort:r,selectedSort:i,sorts:d,onMenuClose:f}):null,o.a.createElement(bt.a,null,u)),o.a.createElement(St.a,null,o.a.createElement("div",{className:Ut.a.storageTotal},Object(B.default)("{storageTotal} Downloaded",{storageTotal:ze(b)})),o.a.createElement(zt,{serverEntityID:t})))};const Qt=Object(d.a)(Oe.a,ge.a,(e,t)=>{const{providers:a}=e;return a.reduce((e,a)=>{const n=t[a].features.find(e=>e.type===lt.c);return n&&null!=n.storageTotal&&(e+=n.storageTotal),e},0)});var Zt=Object(c.b)((function(){return Object(d.a)((e,{activeSort:t})=>t,Qt,H(),Object(d.a)(Object(fe.a)(x.d),e=>e.reduce((e,t)=>e+t.Context.currentSize||0,0)),(e,t,a,n)=>{const o=mt({sort:e});return{downloadTypes:a.reduce((t,a)=>{const{type:n,subtype:o}=a.hint;if(!(o?t.find(e=>e.subtype===o):t.find(e=>e.type===n))){const a=mt({type:n,subtype:o,sort:e});t.push(a)}return t},[o]),storageTotal:t+n}})}))(Vt),Xt=a("fAF6"),Jt=a.n(Xt);var $t=function(e){const{serverEntityID:t,activeType:a,activeSubtype:s,activeSort:r,selectedSort:i,sorts:l,mediaSubscriptions:c,metricsPage:d,metricsProperties:u,isProvidersPending:p,isProvidersPopulated:m,isMediaSubscriptionsPending:b,canShowUpsell:y,providersError:g,mediaSubscriptionsError:v}=e,[h,S]=Object(n.useState)(!1),w=Object(n.useCallback)(()=>{S(!0)},[]),P=Object(n.useCallback)(()=>{S(!1)},[]);if(p&&!m||b&&!c.length)return o.a.createElement(X.a,null,o.a.createElement(Q.a,null));const E=g||v,f=c.length>0;return o.a.createElement(Z.a,{metricsPage:d,metricsProperties:u,allowBackgroundLightPreset:!0,scrollDirection:G.b},f?o.a.createElement(Zt,{serverEntityID:t,activeType:a,activeSubtype:s,activeSort:r,selectedSort:i,sorts:l,size:c.length}):null,o.a.createElement("div",{className:Jt.a.downloadsPageContent},E?o.a.createElement($.a,null):null,E||f?null:o.a.createElement(J.a,{iconComponent:re,kind:z.d,title:Object(B.default)("You have no items downloaded"),description:o.a.createElement(U.a,{className:Jt.a.upsell,message:Object(B.default)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:o.a.createElement(oe,{key:"downloadIcon"})}]})},y?o.a.createElement(U.a,{className:Jt.a.upsell,message:Object(B.default)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:F.a,kind:z.d,onPress:w}]}):null),!E&&f?o.a.createElement(it,{serverEntityID:t,items:c,size:c.length,metricsPage:d,metricsProperties:u,activeSort:r}):null,y?o.a.createElement(Y.a,{origin:V.b,isOpen:h,onModalClose:P}):null))};const Yt={pane:"sync"};function _t(e,t){return!e&&!t||p.a.isEqual(e,t)}const ea=Object(h.a)(e=>{const{key:t,direction:a}=e,{DESCENDING:n}=m.a.directions;return(e,o)=>{let s,r;return"title"===t?(s=e.hint[t].toUpperCase(),r=o.hint[t].toUpperCase()):(s=e[t],r=o[t]),s>r?a===n?-1:1:s<r?a===n?1:-1:0}});const ta={dispatchFetchProvidersWithStorage:L,dispatchInitDownloadsPage:M,dispatchRefreshDownloads:S.d,dispatchResetDownloadsPage:A,dispatchSaveDownloadsParams:R};class aa extends n.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!_t(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){_t(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const{params:e,savedDownloadsParams:t,dispatchFetchProvidersWithStorage:a,dispatchRefreshDownloads:n,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:r,dispatchSaveDownloadsParams:i,...l}=this.props;return o.a.createElement($t,{...l,metricsPage:g.sb,metricsProperties:Yt})}}var na=Object(c.b)((function(){return Object(d.a)((e,{params:t})=>t,e=>e.ui.downloadsPage,e=>e.downloads,y.a,H(),Object(b.a)(v.f),Object(b.a)(v.e),(e,t,a,n,o,s,r)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:u,providersError:p}=t,{isSubscriptionsPending:m,subscriptionsError:b}=a,y=[{key:"title",descKey:"title:desc",defaultDirection:K,title:Object(B.default)("Title")},{key:"createdAt",descKey:"createdAt:desc",defaultDirection:q,title:Object(B.default)("Date Downloaded"),isDefault:!0},{key:"storageTotal",descKey:"storageTotal:desc",defaultDirection:q,title:Object(B.default)("Size on Disk")}],g=i.split(":");let v=g[0];const h=g[1];let S=y.find(e=>e.key===v);S||(S=y.find(e=>e.isDefault)),v||(v=S.key),h&&(S.direction=h);let w=[...o];if((l||c)&&(w=o.reduce((e,t)=>{const a=t.hint.subtype===c,n=t.hint.type===l;let o=!1;return c?a&&(o=!0):n&&!t.hint.subtype&&(o=!0),o&&e.push(t),e},[]),o.length&&!w.length)){const{type:t,subtype:a,...n}=e;w=o,e=n,l=null,c=null}const P=ea(S);return w.sort(P),{selectedSort:S,sorts:y,mediaSubscriptions:w.map(e=>e.entityID),isProvidersPending:d,isProvidersPopulated:u,isMediaSubscriptionsPending:m,canShowUpsell:!s&&!r,providersError:p,mediaSubscriptionsError:b,savedDownloadsParams:n.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}})}),ta)(aa),oa=a("sXw8"),sa=a("yS+A"),ra=a("mMra");var ia=function(e){const{children:t,isWaitingForEmbeddedServer:a,embeddedServerEntityID:n}=e;return a?o.a.createElement(X.a,null,o.a.createElement(Q.a,null)):n?o.a.createElement(sa.a,{serverEntityID:n},t(n)):o.a.createElement(ra.a,null)};const la=Object(d.a)(Oe.a,(e={})=>{const{entityID:t,isProvidersPopulated:a=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:a}}),ca={dispatchChangeQuickSearchSettings:oa.changeQuickSearchSettings};class da extends n.Component{componentDidMount(){this.props.dispatchChangeQuickSearchSettings({providerEntityID:null,providerIdentifier:null,serverEntityID:null,directoryID:null})}render(){const{isProvidersPopulated:e,dispatchChangeQuickSearchSettings:t,...a}=this.props;return o.a.createElement(ia,{...a,isWaitingForEmbeddedServer:!e})}}var ua=Object(c.b)(la,ca)(da);function pa(){const e=Object(r.a)(),t=Object(n.useMemo)(()=>({context:Object(l.a)(e.context),type:Object(l.a)(e.type),subtype:Object(l.a)(e.subtype),sort:Object(l.a)(e.sort),save:Object(i.a)(e.save)}),[e]);return o.a.createElement(s.a,{metricsContext:t.context},o.a.createElement(ua,null,e=>o.a.createElement(na,{serverEntityID:e,params:t,shouldSaveParams:t.save})))}},rKBF:function(e,t,a){e.exports={content:"DownloadSubscriptionSummaryList-content-3K9f0a",scroller:"DownloadSubscriptionSummaryList-scroller-1dCTP- VirtualListScroller-scroller-3aWqhy"}},uEko:function(e,t,a){e.exports={spinner:"ToolbarProcessSubscriptionsButton-spinner-Rdx0_p Spinner-spinner-Niere7 spin-spin-2kLwt_",icon:"ToolbarProcessSubscriptionsButton-icon-1oNRIM PlexIcon-plexIcon-8Tamaj"}}}]);